{"remainingRequest":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zrun/毕设/ecard_manager_frontend/src/components/page/LateSituation.vue?vue&type=style&index=0&id=921f4730&scoped=true&lang=css&","dependencies":[{"path":"/Users/zrun/毕设/ecard_manager_frontend/src/components/page/LateSituation.vue","mtime":1638199121740},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/css-loader/dist/cjs.js","mtime":1635231904892},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1635231911752},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/postcss-loader/src/index.js","mtime":1635231910975},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1635231911752}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8qIGxheW91dC3luIPlsYAgKi8KLmVsLXJvdyB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQouZWwtcm93Omxhc3QtY2hpbGQgewogIG1hcmdpbi1ib3R0b206IDA7Cn0KLmVsLWNvbCB7CiAgYm9yZGVyLXJhZGl1czogNHB4Owp9Ci5iZy1wdXJwbGUtZGFyayB7CiAgYmFja2dyb3VuZDogIzk5YTliZjsKfQouYmctcHVycGxlIHsKICBiYWNrZ3JvdW5kOiAjZDNkY2U2Owp9Ci5iZy1wdXJwbGUtbGlnaHQgewogIGJhY2tncm91bmQ6ICNlNWU5ZjI7Cn0KLmdyaWQtY29udGVudCB7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIG1pbi1oZWlnaHQ6IDM2cHg7Cn0KLnJvdy1iZyB7CiAgcGFkZGluZzogMTBweCAwOwogIGJhY2tncm91bmQtY29sb3I6ICNmOWZhZmM7Cn0KCi5oYW5kbGUtYm94IHsKICBtYXJnaW4tYm90dG9tOiAyMHB4Owp9CgouaGFuZGxlLXNlbGVjdCB7CiAgd2lkdGg6IDEyMHB4Owp9CgouaGFuZGxlLWlucHV0IHsKICB3aWR0aDogMzAwcHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9Ci5oZWFkZXItaWNvbiB7CiAgcGFkZGluZy1yaWdodDogNXB4Owp9Ci5kZWwtZGlhbG9nLWNudCB7CiAgZm9udC1zaXplOiAxNnB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoudGFibGUgewogIHdpZHRoOiAxMDAlOwogIGZvbnQtc2l6ZTogMTRweDsKfQoucmVkIHsKICBjb2xvcjogI2ZmMDAwMDsKfQoubXIxMCB7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CgoudGV4dEFsaWduQ2VudGVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi8qIOS/ruaUuXNlbGVjdOeahOebkuaooeWeiyAqLwouZWwtc2VsZWN0IHsKICBkaXNwbGF5OiBibG9jazsKfQoKLyog56Gu5a6a5oyJ6ZKu55qE5pi+56S65LiO6ZqQ6JePICovCi5kaXNhYmxlZGJ0biB7CiAgZGlzcGxheTogbm9uZTsKfQoKLyog5L+u5pS56K+l5bGe5oCn5YC8ICDmn6Xor6LmnaHku7bvvIzmn6Xor6Lnu5PmnpzlvpfmoLflvI8gKi8KLmVsLWJyZWFkY3J1bWIgewogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWJlZWY1OwogIHBhZGRpbmctYm90dG9tOiAxMHB4Owp9CgovKiDmibnph4/lr7zlhaXlkYrorabkv6Hmga/mj5DnpLogKi8KLndhcm5pbmctaW5mbyB7CiAgcGFkZGluZy10b3A6IDIwcHg7CiAgY29sb3I6ICNmMDA7Cn0KCi8qIOaPkOekuuWbvuagh+iuvue9riAqLwouaWNvbi13emctY29uZmlnIHsKICBoZWlnaHQ6IDMwcHg7CiAgbGluZS1oZWlnaHQ6IDMwcHg7Cn0KCi8qIOetm+mAieadoeS7tueahOW4g+WxgCAqLwoud3pnLWZsb2F0LXJpZ2h0IHsKICBmbG9hdDogcmlnaHQ7Cn0K"},{"version":3,"sources":["LateSituation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2sBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"LateSituation.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n  <div class=\"table\">\n    <div class=\"container\">\n      <el-collapse v-model=\"activeNames\">\n        <el-collapse-item title=\"\"\n                          name=\"1\">\n          <template slot=\"title\">\n            <i class=\"header-icon el-icon-setting\"></i>设置学校范围及迟到时间：\n          </template>\n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-col :span=\"18\">\n                <el-input v-model=\"fence\" placeholder=\"请输入学校范围\">\n                  <template slot=\"prepend\">学校范围:</template>\n                </el-input>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button type=\"primary\"\n                           @click=\"updateFence\">修改</el-button>\n              </el-col>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-col :span=\"18\">\n                <el-input v-model=\"lateTime\" placeholder=\"请输入迟到时间\">\n                  <template slot=\"prepend\">迟到时间:</template>\n                </el-input>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button type=\"primary\"\n                           @click=\"updateLateTime\">修改</el-button>\n              </el-col>\n            </el-col>\n          </el-row>\n        </el-collapse-item>\n        <el-collapse-item name=\"2\">\n          <template slot=\"title\">\n            <i class=\"header-icon el-icon-lx-cascades\"></i>迟到统计：\n          </template>\n          <el-table :data=\"tableData\"\n                    border\n                    class=\"table\"\n                    ref=\"multipleTable\"\n                    v-loading=\"loading\"\n                    :reserve-selection=\"true\"\n                    @row-dblclick=\"rowDblclick\">\n            <el-table-column type=\"index\"\n                             align=\"center\">\n            </el-table-column>\n            <template v-for=\"(item, index) in headerFilter\">\n              <el-table-column :prop=\"item.prop\"\n                               :key=\"index\"\n                               align=\"center\"\n                               :label=\"item.label\"\n                               :formatter=\"item.formatter\"\n                               v-if=\"item.selected\">\n              </el-table-column>\n            </template>\n          </el-table>\n          <div class=\"pagination\">\n            <el-pagination background\n                           @size-change=\"handleSizeChange\"\n                           @current-change=\"handleCurrentChange\"\n                           layout=\"total, sizes, prev, pager, next, jumper\"\n                           :page-size=\"searchCondition.pageSize\"\n                           :current-page=\"searchCondition.pageNumber\"\n                           :page-sizes=\"pageSizes\"\n                           :total=\"total\"\n                           :hide-on-single-page=\"true\">\n            </el-pagination>\n          </div>\n        </el-collapse-item>\n      </el-collapse>\n    </div>\n\n    <!-- 重新登录提示框 -->\n    <el-dialog title=\"提示\"\n               :visible.sync=\"loginVisible\"\n               width=\"300px\"\n               :close-on-click-modal='false'\n               center>\n      <div class=\"del-dialog-cnt\">登录时间过长，请重新登录</div>\n      <span slot=\"footer\"\n            class=\"dialog-footer\">\n        <el-button @click=\"loginVisible = false\">取 消</el-button>\n        <el-button type=\"primary\"\n                   @click=\"Common.signOut('/login')\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'LateSituation',\n  data () {\n    return {\n      Request: this.$api.api.prototype,/* 用于获取请求地址 */\n      Common: this.$common.common.prototype,/* 用于获取公共方法 */\n      studentUrl: '',\n      gradeInfoUrl: '',\n      classInfoUrl: '',\n      deviceInfoUrl: '',\n      schoolInfoUrl: '',\n      deviceMoveInfoUrl: '',\n\n      selectTableData: [],/* 选中行数据 */\n      selectGradeCopy: [],\n      selectClassCopy: [],\n      selectSchoolCopy: [],\n      selectSchool: [],\n      selectSchoolTemplate: [],\n      selectSchoolMove: [],\n      selectSchoolMoveOld: [],\n      selectSchoolMoveNew: [],\n      selectDeviceTypeCopy: [],\n      selectDeviceType: [],\n      selectOperatorTypeCopy: [],\n      selectOperatorType: [],\n\n      activeNames: ['1', '2'],\n\n      tableData: [],\n\n      dialogTitle: '',\n      editVisible: false,\n\n      innerVisible: false,\n      delVisible: false,\n      loginVisible: false,/* 提示需要登录的对话框 */\n      delVisibleType: 'delete',\n      disabledbtn: false,/* 可用与不可用 */\n      disabledbtnExport: false,/* 可用与不可用 */\n      isDisabledbtn: false,/* 显示或隐藏 */\n\n      importVisible: false,\n      transferVisible: false,\n      transferOldVisible: false,\n      fileList: [],\n      warningInfo: '',\n      headers: {\n        Authorization: localStorage.getItem('token')\n      },\n\n      loading: true,\n      loadingDialog: false,/* 对话框中数据提交加载 */\n      propTypeCodeDisabled: false,/* 是否可编辑 */\n      classCodeDisabled: true,/* 是否可编辑 */\n      showType: 'add',/* 用于对话框显示 类型标记 */\n      methodType: 'post',/* 请求类型 */\n\n      total: 8,/* 总数 */\n      /* 如果是后端分页 */\n      //pageNumber: 1,/* 第几页 */\n      //pageSize: 8,/* 每页显示几条 */\n      pageSizes: [8, 20, 30, 40, 50, 100],\n\n      /* 批量上传所需要的数据 */\n      templateForm: {\n        schoolId: ''\n      },\n\n      /* 新设备转移需要的数据 */\n      transferForm: {\n        schoolId: '',\n        schoolName: ''\n      },\n\n      /* 旧设备转移需要的数据 */\n      transferOldForm: {\n        srcId: '',\n        srcAccount: '',\n        destId: '',\n        destAccount: '',\n        imei: ''\n      },\n\n      searchCondition: {\n        schoolId: '',\n        gradeId: '',\n        classId: '',\n        studentName: '',\n        imei: '',\n        rfid: '',\n        phone: '',\n        deviceCode: '',\n        operatorType: '',\n        pageNumber: 1,/* 第几页 */\n        pageSize: 8/* 每页显示几条 */\n      },\n\n      studentForm: {\n        studentNo: '',\n        name: '',\n        sex: '',\n        age: '',\n        phone: '',\n        class: '',\n        grade: '',\n        schoolId: '',\n        imei: '',\n      },\n      rules: {\n        operatorType: [\n          { required: true, message: '请选择运营商', trigger: 'blur' }\n        ],\n        deviceCode: [\n          { required: true, message: '请选择设备类型', trigger: 'blur' }\n        ],\n        schoolId: [\n          { required: true, message: '请选择学校', trigger: 'blur' }\n        ],\n        imei: [\n          { required: true, message: '请输入IMEI号', trigger: 'blur' }\n        ],\n        rfid: [\n          { required: true, message: '请输入RFID号', trigger: 'blur' }\n        ]\n      },\n      /* 表头标题\n        参数，标题名称，是否选中，格式化方法\n      */\n      headerFilter: [\n        {\n          prop: \"time\",\n          label: \"时间\",\n          selected: true\n        },\n        {\n          prop: \"situation\",\n          label: \"到校情况\",\n          selected: true\n        },\n        {\n          prop: \"studentName\",\n          label: \"学生\",\n          selected: true\n        },\n        {\n          prop: \"studentNo\",\n          label: \"学号\",\n          selected: true\n        },\n        {\n          prop: \"className\",\n          label: \"班级\",\n          formatter: this.formatterClassName,\n          selected: true\n        },\n        {\n          prop: \"schoolName\",\n          label: \"学校\",\n          selected: true\n        },\n        {\n          prop: \"phone\",\n          label: \"手机号\",\n          selected: true\n        },\n      ],\n      idx: -1,\n      id: -1,\n\n      fence: '[[114.4098897, 23.1033580],[114.4107533, 23.1040981]]',\n      lateTime: '08:00:00',\n    }\n  },\n  created () {\n    this.schoolInfoUrl = this.Request.getSchoolInfoUrl();\n    this.studentUrl = this.Request.getStudentUrl();\n    this.gradeInfoUrl = this.Request.getGradeInfoUrl();\n    this.classInfoUrl = this.Request.getClassInfoUrl();\n\n    /* 获取学校信息 */\n    this.getSchoolInfoDataRequest();\n    /* 获取表格信息 */\n    this.getListDataRequest();\n\n    this.getFenceRequest();\n\n    this.getLateTimeRequest();\n  },\n  computed: {\n  },\n\n  methods: {\n    /* 每页显示几条 */\n    handleCurrentChange (val) {\n      this.searchCondition.pageNumber = val;\n      this.getListDataRequest();\n    },\n\n    /* 显示第几页 */\n    handleSizeChange (val) {\n      this.searchCondition.pageSize = val;\n      this.getListDataRequest();\n    },\n\n    /* 格式化班级 */\n    formatterClassName (row) {\n      return row.grade + \"年级\" + row.class + \"班\";\n    },\n\n    /* 请求：获取表格中数据 */\n    getListDataRequest () {\n      this.Common.getAxios(this.Request.getLateSituationUrl(), '', this.getListData);\n    },\n\n    /* 请求：获取学校信息 */\n    getSchoolInfoDataRequest () {\n      this.Common.getAxios(this.Request.getSchoolInfoUrl(), '', this.getSchoolData);\n    },\n\n    getFenceRequest() {\n      this.Common.getAxios(this.Request.getFenceUrl(), '', this.getFence);\n    },\n\n    getLateTimeRequest() {\n      this.Common.getAxios(this.Request.getLateTimeUrl(), '', this.getLateTime);\n    },\n\n    /* 请求：获取设备类型信息 */\n    getDeviceTypeRequest () {\n      this.Common.getAxios(this.propListUrl, {\n        propTypeCode: 'DEVICE_MODEL'\n      }, this.getPropList, ['selectDeviceTypeCopy', 'selectDeviceType']);\n    },\n\n    /* 请求：获取运营商类型信息 */\n    getOperatorTypeRequest () {\n      this.Common.getAxios(this.propListUrl, {\n        propTypeCode: 'OPERATOR_TYPE'\n      }, this.getPropList, ['selectOperatorTypeCopy', 'selectOperatorType']);\n    },\n\n    /* 获取列表数据 */\n    getListData (data) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        this.loading = false;\n        this.tableData = tempData.data;\n        this.total = tempData.data.length;\n      } else if (data.status === 401) {\n        this.loginVisible = true;\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n        this.loading = false;\n      }\n    },\n\n    /* 获取学校数据  */\n    getSchoolData (data) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        this.loading = false;\n        this.selectSchool = tempData.data;\n      } else if (data.status === 401) {\n        this.loginVisible = true;\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n        this.loading = false;\n      }\n    },\n\n    getFence (data) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        this.loading = false;\n        this.fence = tempData.data.fence;\n      } else if (data.status === 401) {\n        this.loginVisible = true;\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n        this.loading = false;\n      }\n    },\n\n    getLateTime (data) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        this.loading = false;\n        this.lateTime = tempData.data.lateTime;\n      } else if (data.status === 401) {\n        this.loginVisible = true;\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n        this.loading = false;\n      }\n    },\n\n    /* 获取属性列表数据 */\n    getPropList (data, objArray) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        if (!this.validToken(tempData)) return;\n        if (tempData.code === 0 && tempData.result !== \"\") {\n          objArray.forEach(item => {\n            this[item] = tempData.result;\n          })\n        }\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n      }\n    },\n\n    /* 查询区域：获取年级信息 */\n    getGradeCopyInfoData (data) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        if (!this.validToken(tempData)) return;\n        if (tempData.code === 0 && tempData.result !== \"\") {\n          this.searchCondition.gradeId = '';\n          this.searchCondition.classId = '';\n          this.selectGradeCopy = [];\n          this.selectClassCopy = [];\n          this.selectGradeCopy = tempData.result;\n        }\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n      }\n    },\n\n    /* 查询区域：获取班级信息 */\n    getClassInfoCopyData (data) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        if (!this.validToken(tempData)) return;\n        if (tempData.code === 0 && tempData.result !== \"\") {\n          this.searchCondition.classId = '';\n          this.selectClassCopy = tempData.result;\n        }\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n      }\n    },\n\n    /* 查询区域：学校下拉框事件 */\n    changeSchoolCopy (data) {\n      this.Common.getAxios(this.gradeInfoUrl, {\n        schoolId: data\n      }, this.getGradeCopyInfoData);\n    },\n    /* 转移设备区域：学校下拉框事件 */\n    changeSchoolTransfer (data) {\n      let obj = {};\n      /* 筛选出匹配数据 */\n      obj = this.selectSchoolMove.find((item) => {\n        return item.id === data;\n      });\n      this.transferForm.schoolName = obj.schoolName;\n    },\n    /* 旧转移设备区域：学校下拉框事件 */\n    changeSchoolTransferOld (data) {\n      let obj = {};\n      /* 筛选出匹配数据 */\n      obj = this.selectSchoolMoveOld.find((item) => {\n        return item.id === data;\n      });\n      this.transferOldForm.srcAccount = obj.schoolName;\n    },\n    /* 旧移设备区域：学校下拉框事件 */\n    changeSchoolTransferNew (data) {\n      let obj = {};\n      /* 筛选出匹配数据 */\n      obj = this.selectSchoolMoveNew.find((item) => {\n        return item.id === data;\n      });\n      this.transferOldForm.destAccount = obj.schoolName;\n    },\n\n    /* 查询区域：年级下拉框事件 */\n    changeGradeCopy (data) {\n      this.Common.getAxios(this.classInfoUrl, {\n        gradeId: data\n      }, this.getClassInfoCopyData);\n    },\n\n\n    /* 双击选中当前行 */\n    rowDblclick (row) {\n      this.$refs.multipleTable.toggleRowSelection(row);\n    },\n\n    /* 点击查看或编辑按钮 */\n    handleViewEdit (index, row, code, name) {\n      if ('view' === code) {\n        this.dialogTitle = name;\n        this.isDisabledbtn = true;\n      } else if ('edit' === code) {\n        this.dialogTitle = name;\n        this.methodType = 'put';\n      }\n      this.studentForm.id = row.id;\n\n      this.studentForm.deviceCode = row.deviceCode;\n      this.studentForm.operatorType = row.operatorType;\n      this.studentForm.schoolId = row.schoolId;\n      this.studentForm.imei = row.imei;\n      this.studentForm.rfid = row.rfid;\n      this.showType = code;\n\n      this.propTypeCodeDisabled = true;\n      this.classCodeDisabled = true;\n      this.editVisible = true;\n    },\n\n    /* 点击删除按钮 */\n    handleDelete (index, row) {\n      this.idx = index;\n      this.id = row.id;\n      this.delVisible = true;\n      this.delVisibleType = 'delete';\n    },\n\n    /* 搜索 */\n    searchInfo () {\n      /* 重置到第一页 */\n      this.loading = true;\n      this.searchCondition.pageNumber = 1;\n      this.getListDataRequest();\n    },\n\n    /* 重置搜索内容 */\n    resetSearch () {\n      this.searchCondition.id = '';\n      this.searchCondition.operatorType = '';\n      this.searchCondition.deviceCode = '';\n      this.searchCondition.schoolId = '';\n      this.searchCondition.gradeId = '';\n      this.searchCondition.classId = '';\n      this.searchCondition.studentName = '';\n      this.searchCondition.imei = '';\n      this.searchCondition.rfid = '';\n      this.searchCondition.phone = '';\n      this.searchInfo();\n    },\n\n    /* 新增 */\n    addData () {\n      this.dialogTitle = '新增';\n      this.editVisible = true;\n    },\n\n\n    /* 批量删除 */\n    batchDelete () {\n      /* 获取选中的数据 */\n      let selection = this.$refs.multipleTable.store.states.selection;\n      this.selectTableData = selection;\n      if (selection.length > 0) {\n        this.delVisible = true;\n        this.delVisibleType = 'batchDelete';\n      } else {\n        this.$message.warning('请至少选择一条数据');\n      }\n    },\n\n    /* 关闭新增编辑查看 弹出框事件 */\n    closedFormDialog () {\n      /* 初始化数据使用clearValidate清空校验，\n        resetFields方法在点击编辑而后点击新增时是无效的，\n        所以还是要手动初始化所有的值\n      */\n      this.isDisabledbtn = false;\n      this.propTypeCodeDisabled = false;\n      this.classCodeDisabled = true;\n\n      this.studentForm.id = '';\n      this.studentForm.deviceCode = '';\n      this.studentForm.operatorType = '';\n      this.studentForm.schoolId = '';\n      this.studentForm.imei = '';\n      this.studentForm.rfid = '';\n\n      this.showType = 'add';\n      this.methodType = 'post';\n      this.$refs['imeiForm'].clearValidate();\n    },\n\n    /* 保存或编辑 */\n    submitForm (formName, type, url, formData) {\n      /* 防止多次提交 */\n      this.disabledbtn = true;\n      this.loadingDialog = true;\n      this.Common.commonAxios(url, type, formData, this.submitFormInfo);\n      this.disabledbtn = false;\n      this.loadingDialog = false;\n    },\n\n    /* 保存或编辑信息 */\n    submitFormInfo (data) {\n      if (data.status === 200) {\n        let tempData = data.data;\n        this.disabledbtn = false;\n        this.loadingDialog = false;\n        if (tempData.code === 200) {\n          this.editVisible = false;\n          this.$message.success(tempData.data);\n        } else {\n          this.$message.error(tempData.data);\n        }\n      } else if (data.status === 401) {\n        this.loginVisible = true;\n      } else {\n        this.disabledbtn = false;\n        this.loadingDialog = false;\n        this.$message.error('服务器繁忙，请稍后再试');\n      }\n    },\n\n    /* 确定删除 */\n    deleteRow (deleteUrl) {\n      if (this.delVisibleType !== 'delete' && this.delVisibleType !== 'batchDelete') {\n        this.delVisible = false;\n        this.$message.error(`别偷偷的修改特定的参数哦`);\n        return;\n      }\n      let selection = [];\n      let length = 0;\n      /* 获取要删除数据的id值数组 (单个与批量删除相同) */\n      let idArray = [];\n      if (this.delVisibleType === 'delete') {\n        idArray.push(this.id);\n      } else if (this.delVisibleType === 'batchDelete') {\n        /*获取选中的值 */\n        selection = this.$refs.multipleTable.store.states.selection;\n        length = selection.length;\n        for (let i = 0; i < length; i++) {\n          idArray.push(selection[i].id);\n        }\n      }\n      this.loading = true;\n      this.disabledbtn = true;\n      /* 删除一条或多条数据 */\n      this.Common.deleteAxios(deleteUrl, {\n        idArray: idArray\n      }, this.deleteInfo, idArray);\n      this.delVisible = false;\n    },\n\n    /* 删除后的信息 */\n    deleteInfo (data, idArray) {\n      this.disabledbtn = false;\n      this.loading = false;\n      if (data.status === 200) {\n        let tempData = data.data;\n        if (!this.validToken(tempData)) return;\n        if (tempData.code !== 0) {\n          this.$message.error(tempData.message);\n          return;\n        }\n        /* 当删除成功后，删除对应选中的数据或单个数据 */\n        for (let j = this.tableData.length - 1; j >= 0; j--) {\n          for (let i = 0; i < idArray.length; i++) {\n            if (idArray[i] === this.tableData[j].id) {\n              this.tableData.splice(j, 1);\n              break;\n            }\n          }\n        }\n        this.$message.success(`成功删除了${idArray.length}条数据`);\n        this.selectTableData = [];/* 清除选中的数据 */\n      } else {\n        this.$message.error('服务器繁忙，请稍后再试');\n      }\n    },\n\n    /* 校验token */\n    validToken (data) {\n      if (data.code === 2001 || data.code === 2101 || data.code === 2102) {\n        this.loginVisible = true;\n        return false;\n      }\n      return true;\n    },\n\n    /* 取消提交 */\n    cancelImport () {\n      /* bug原因，不用api提供的方法 不信你试试 2.9.1版本未解决*/\n      // this.$refs[formName].resetFields();\n      this.importVisible = false;\n    },\n\n    /* 上传成功 */\n    handleFileSuccess (data) {\n      if (data.code !== 0) {\n        this.fileList = [];\n        this.$message.warning(data.message);\n        this.warningInfo = data.message;\n      } else {\n        this.$message.success('批量导入成功');\n        this.getListDataRequest();\n      }\n    },\n\n    updateFence() {\n      var formData = {\n        schoolID: 1,\n        fence: this.fence,\n      }\n      this.submitForm('updateFence', 'post', this.Request.getFenceUrl(), formData)\n    },\n\n    updateLateTime() {\n      var formData = {\n        schoolID: 1,\n        lateTime: this.lateTime,\n      }\n      this.submitForm('updateLateTime', 'post', this.Request.getLateTimeUrl(), formData)\n    },\n  }\n}\n\n</script>\n\n<style scoped>\n/* layout-布局 */\n.el-row {\n  margin-bottom: 20px;\n}\n.el-row:last-child {\n  margin-bottom: 0;\n}\n.el-col {\n  border-radius: 4px;\n}\n.bg-purple-dark {\n  background: #99a9bf;\n}\n.bg-purple {\n  background: #d3dce6;\n}\n.bg-purple-light {\n  background: #e5e9f2;\n}\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.row-bg {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n\n.handle-box {\n  margin-bottom: 20px;\n}\n\n.handle-select {\n  width: 120px;\n}\n\n.handle-input {\n  width: 300px;\n  display: inline-block;\n}\n.header-icon {\n  padding-right: 5px;\n}\n.del-dialog-cnt {\n  font-size: 16px;\n  text-align: center;\n}\n.table {\n  width: 100%;\n  font-size: 14px;\n}\n.red {\n  color: #ff0000;\n}\n.mr10 {\n  margin-right: 10px;\n}\n\n.textAlignCenter {\n  text-align: center;\n}\n\n/* 修改select的盒模型 */\n.el-select {\n  display: block;\n}\n\n/* 确定按钮的显示与隐藏 */\n.disabledbtn {\n  display: none;\n}\n\n/* 修改该属性值  查询条件，查询结果得样式 */\n.el-breadcrumb {\n  border-bottom: 1px solid #ebeef5;\n  padding-bottom: 10px;\n}\n\n/* 批量导入告警信息提示 */\n.warning-info {\n  padding-top: 20px;\n  color: #f00;\n}\n\n/* 提示图标设置 */\n.icon-wzg-config {\n  height: 30px;\n  line-height: 30px;\n}\n\n/* 筛选条件的布局 */\n.wzg-float-right {\n  float: right;\n}\n</style>\n"]}]}