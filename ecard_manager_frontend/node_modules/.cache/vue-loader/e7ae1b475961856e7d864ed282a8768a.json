{"remainingRequest":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zrun/毕设/ecard_manager_frontend/src/components/page/VirtualDevice.vue?vue&type=style&index=0&id=009cb948&scoped=true&lang=css&","dependencies":[{"path":"/Users/zrun/毕设/ecard_manager_frontend/src/components/page/VirtualDevice.vue","mtime":1636979107322},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/css-loader/dist/cjs.js","mtime":1635231904892},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1635231911752},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/postcss-loader/src/index.js","mtime":1635231910975},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/毕设/ecard_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1635231911752}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ncmlkLWNvbnRlbnQgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBoZWlnaHQ6IDE1MHB4Owp9Ci5ncmlkLWNvbnQtcmlnaHQgewogICAgZmxleDogMTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQtc2l6ZTogMTVweDsKICAgIGNvbG9yOiAjMjgyNzI3Owp9Ci5ncmlkLWNvbi1pY29uIHsKICAgIGZvbnQtc2l6ZTogNjVweDsKICAgIHdpZHRoOiAxMDBweDsKICAgIGhlaWdodDogMTUwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBsaW5lLWhlaWdodDogMTUwcHg7CiAgICBjb2xvcjogI2ZmZjsKfQouZ3JpZC1jb24tMiAuZ3JpZC1jb24taWNvbiB7CiAgICBiYWNrZ3JvdW5kOiByZ2IoMTAwLCAyMTMsIDExNCk7Cn0K"},{"version":3,"sources":["VirtualDevice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VirtualDevice.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n    <div class=\"table\">\n        <div class=\"container\" >\n            <el-row :gutter=\"20\" class=\"mgb20\" style=\"margin-top: 10px\">\n                <el-col :span=\"8\">\n                    <el-button type=\"primary\"\n                               icon=\"el-icon-plus\"\n                               @click=\"addVirtualDevice\">\n                        添加虚拟设备\n                    </el-button>\n                </el-col>\n            </el-row>\n            <el-divider></el-divider>\n            <el-row :gutter=\"30\" class=\"mgb20\">\n                <el-col :span=\"8\" v-for=\"(virtualDevice, index) in virtualDevices\"\n                        :key=\"index\">\n                    <el-card shadow=\"always\"\n                             :body-style=\"{padding: '0'}\">\n                        <div class=\"grid-content grid-con-2\">\n                            <i class=\"el-icon-mobile-phone grid-con-icon\"></i>\n                            <div class=\"grid-cont-right\">\n                                <div style=\"margin-bottom: 5px\">imei: {{virtualDevice.imei}}</div>\n                                <div style=\"margin-bottom: 15px\">学生姓名: {{virtualDevice.student_name}}</div>\n                                <el-button type=\"danger\"\n                                           icon=\"el-icon-bell\"\n                                           @click=\"alarmRequest(virtualDevice.imei)\">\n                                    告警\n                                </el-button>\n                            </div>\n                        </div>\n                    </el-card>\n                </el-col>\n            </el-row>\n        </div>\n\n        <!-- 重新登录提示框 -->\n        <el-dialog title=\"提示\"\n                   :visible.sync=\"loginVisible\"\n                   width=\"300px\"\n                   :close-on-click-modal='false'\n                   center>\n            <div class=\"del-dialog-cnt\">登录时间过长，请重新登录</div>\n            <span slot=\"footer\"\n                  class=\"dialog-footer\">\n                <el-button @click=\"loginVisible = false\">取 消</el-button>\n                <el-button type=\"primary\"\n                           @click=\"Common.signOut('/login')\">确 定</el-button>\n            </span>\n        </el-dialog>\n\n        <!-- 新增编辑查看弹出框 -->\n        <el-dialog :title=\"dialogTitle\"\n                   :visible.sync=\"editVisible\"\n                   width=\"40%\"\n                   :close-on-click-modal=\"false\"\n                   @closed=\"closedFormDialog\">\n            <el-form ref=\"imeiForm\"\n                     :model=\"studentForm\"\n                     :rules=\"rules\"\n                     v-loading=\"loadingDialog\"\n                     label-width=\"120px\">\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"学号：\"\n                                      prop=\"studentNo\">\n                            <el-input v-model=\"studentForm.studentNo\"\n                                      placeholder=\"请输入学号\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"姓名：\"\n                                      prop=\"name\">\n                            <el-input v-model=\"studentForm.name\"\n                                      placeholder=\"请输入姓名\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"年龄：\"\n                                      prop=\"age\">\n                            <el-input v-model=\"studentForm.age\"\n                                      placeholder=\"请输入年龄\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-form-item label=\"性别：\"\n                                  prop=\"sex\">\n                        <el-radio-group v-model=\"studentForm.sex\">\n                            <el-radio :label=\"1\">男</el-radio>\n                            <el-radio :label=\"0\">女</el-radio>\n                        </el-radio-group>\n                    </el-form-item>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"手机：\"\n                                      prop=\"phone\">\n                            <el-input v-model=\"studentForm.phone\"\n                                      placeholder=\"请输入手机\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"学校：\"\n                                      prop=\"schoolId\">\n                            <el-select v-model=\"studentForm.schoolId\"\n                                       placeholder=\"请选择学校\"\n                                       class=\"\">\n                                <el-option v-for=\"item in selectSchool\"\n                                           :label=\"item.SchoolName\"\n                                           :value=\"item.ID\"\n                                           :key=\"item.ID\"></el-option>\n                            </el-select>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"年级：\"\n                                      prop=\"grade\">\n                            <el-input v-model=\"studentForm.grade\"\n                                      placeholder=\"请输入年级\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"班级：\"\n                                      prop=\"class\">\n                            <el-input v-model=\"studentForm.class\"\n                                      placeholder=\"请输入班级\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"IMEI号：\"\n                                      prop=\"imei\">\n                            <el-input v-model=\"studentForm.imei\"\n                                      placeholder=\"请输入IMEI号\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n            </el-form>\n            <span slot=\"footer\"\n                  class=\"dialog-footer\">\n        <el-button @click=\"cancelSubmit('imeiForm')\">取 消</el-button>\n\n        <el-button type=\"primary\"\n                   :disabled='disabledbtn'\n                   v-if=\"!isDisabledbtn\"\n                   @click=\"submitForm('studentForm','post', Request.getVirtualDeviceUrl(), studentForm)\">确 定</el-button>\n      </span>\n        </el-dialog>\n\n        <el-dialog :title=\"告警\"\n                   :visible.sync=\"alarmVisible\"\n                   width=\"40%\"\n                   :close-on-click-modal=\"false\"\n                   @closed=\"closedFormDialog\">\n            <el-form ref=\"alarmForm\"\n                     :model=\"alarmForm\"\n                     :rules=\"rules\"\n                     v-loading=\"loadingDialog\"\n                     label-width=\"120px\">\n                <el-row :gutter=\"20\">\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"告警类型：\"\n                                      prop=\"alarmType\">\n                            <el-select v-model=\"alarmForm.alarmType\"\n                                       placeholder=\"请选择告警类型\"\n                                       class=\"\">\n                                <el-option v-for=\"item in selectAlarmType\"\n                                           :label=\"item.alarmContent\"\n                                           :value=\"item.id\"\n                                           :key=\"item.id\"></el-option>\n                            </el-select>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n            </el-form>\n            <span slot=\"footer\"\n                  class=\"dialog-footer\">\n        <el-button @click=\"cancelSubmit('imeiForm')\">取 消</el-button>\n\n        <el-button type=\"primary\"\n                   :disabled='disabledbtn'\n                   v-if=\"!isDisabledbtn\"\n                   @click=\"submitForm('alarmForm','post', Request.getAlarmUrl(), alarmForm)\">确 定</el-button>\n      </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"VirtualDevice\",\n        data () {\n            return {\n                Request: this.$api.api.prototype,/* 用于获取请求地址 */\n                Common: this.$common.common.prototype,/* 用于获取公共方法 */\n\n                loginVisible: false,\n                virtualDevices:[],\n                selectSchool: [],\n\n                dialogTitle: '',\n                editVisible: false,\n                alarmVisible: false,\n\n                alarmType: '',\n\n                studentForm: {\n                    studentNo: '',\n                    name: '',\n                    sex: '',\n                    age: '',\n                    phone: '',\n                    class: '',\n                    grade: '',\n                    schoolId: '',\n                    imei: '',\n                },\n\n                selectAlarmType: [\n                    {id: 1, alarmContent: \"SOS告警\"},\n                    {id: 2, alarmContent: \"低电量告警\"},\n                    {id: 3, alarmContent: \"出围栏告警\"},\n                    {id: 4, alarmContent: \"进围栏告警\"},\n                ],\n                alarmForm: {\n                    alarmType: '',\n                    imei: '',\n                }\n            }\n        },\n\n        created() {\n            this.getVirtualDevicesRequest();\n            this.getSchoolInfoDataRequest();\n        },\n\n        methods: {\n            // 获取虚拟设备\n            getVirtualDevicesRequest () {\n                this.Common.getAxios(this.Request.getVirtualDeviceUrl(), '', this.getVirtualDevices);\n            },\n            getVirtualDevices (data) {\n                if (data.status === 200) {\n                    let tempData = data.data;\n                    this.virtualDevices = tempData.data;\n                    console.log(\"virtualDevices:\",this.virtualDevices)\n                } else if (data.status === 401) {\n                    this.loginVisible = true;\n                } else {\n                    this.$message.error('服务器繁忙，请稍后再试');\n                }\n            },\n\n            /* 请求：获取学校信息 */\n            getSchoolInfoDataRequest () {\n                this.Common.getAxios(this.Request.getSchoolInfoUrl(), '', this.getSchoolData);\n            },\n            /* 获取学校数据  */\n            getSchoolData (data) {\n                if (data.status === 200) {\n                    let tempData = data.data;\n                    this.loading = false;\n                    this.selectSchool = tempData.data;\n                } else if (data.status === 401) {\n                    this.loginVisible = true;\n                } else {\n                    this.$message.error('服务器繁忙，请稍后再试');\n                    this.loading = false;\n                }\n            },\n\n            addVirtualDevice() {\n                this.dialogTitle = '新增';\n                this.editVisible = true;\n            },\n\n            /* 保存或编辑 */\n            submitForm (formName, type, url, formData) {\n                /* 防止多次提交 */\n                this.disabledbtn = true;\n                this.loadingDialog = true;\n                this.Common.commonAxios(url, type, formData, this.submitFormInfo);\n                this.disabledbtn = false;\n                this.loadingDialog = false;\n            },\n\n            /* 保存或编辑信息 */\n            submitFormInfo (data) {\n                if (data.status === 200) {\n                    let tempData = data.data;\n                    this.disabledbtn = false;\n                    this.loadingDialog = false;\n                    if (tempData.code === 200) {\n                        this.editVisible = false;\n                        this.alarmVisible = false;\n                        this.$message.success(\"操作成功\");\n                        /* 重新刷新数据 */\n                        this.getVirtualDevicesRequest();\n                    } else {\n                        this.$message.error(tempData.message);\n                    }\n                } else if (data.status === 401) {\n                    this.loginVisible = true;\n                } else {\n                    this.disabledbtn = false;\n                    this.loadingDialog = false;\n                    this.$message.error('服务器繁忙，请稍后再试');\n                }\n            },\n\n            alarmRequest(imei) {\n                this.alarmVisible = true;\n                this.alarmForm.imei = imei;\n            },\n        },\n\n    }\n</script>\n\n<style scoped>\n    .grid-content {\n        display: flex;\n        align-items: center;\n        height: 150px;\n    }\n    .grid-cont-right {\n        flex: 1;\n        text-align: center;\n        font-size: 15px;\n        color: #282727;\n    }\n    .grid-con-icon {\n        font-size: 65px;\n        width: 100px;\n        height: 150px;\n        text-align: center;\n        line-height: 150px;\n        color: #fff;\n    }\n    .grid-con-2 .grid-con-icon {\n        background: rgb(100, 213, 114);\n    }\n</style>"]}]}