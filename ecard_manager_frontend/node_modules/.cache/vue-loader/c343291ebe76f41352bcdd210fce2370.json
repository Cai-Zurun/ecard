{"remainingRequest":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/qrcode/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/qrcode/index.vue","mtime":1635777723566},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/babel-loader/lib/index.js","mtime":1635231739480},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1635231911752}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUVJDb2RlSW1wbCBmcm9tICdxci5qcy9saWIvUVJDb2RlJw0KaW1wb3J0IEVycm9yQ29ycmVjdExldmVsIGZyb20gJ3FyLmpzL2xpYi9FcnJvckNvcnJlY3RMZXZlbCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAncXJjb2RlJywNCiAgcHJvcHM6IHsNCiAgICB2YWx1ZTogU3RyaW5nLA0KICAgIHNpemU6IHsNCiAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgIGRlZmF1bHQ6IDE2MA0KICAgIH0sDQogICAgbGV2ZWw6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdMJw0KICAgIH0sDQogICAgYmdDb2xvcjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJyNGRkZGRkYnDQogICAgfSwNCiAgICBmZ0NvbG9yOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnIzAwMDAwMCcNCiAgICB9LA0KICAgIHR5cGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdpbWcnDQogICAgfQ0KICB9LA0KICBtb3VudGVkICgpIHsNCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICB0aGlzLnJlbmRlcigpDQogICAgfSkNCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGltZ0RhdGE6ICcnDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIHZhbHVlICgpIHsNCiAgICAgIHRoaXMucmVuZGVyKCkNCiAgICB9LA0KICAgIHNpemUgKCkgew0KICAgICAgdGhpcy5yZW5kZXIoKQ0KICAgIH0sDQogICAgbGV2ZWwgKCkgew0KICAgICAgdGhpcy5yZW5kZXIoKQ0KICAgIH0sDQogICAgYmdDb2xvciAoKSB7DQogICAgICB0aGlzLnJlbmRlcigpDQogICAgfSwNCiAgICBmZ0NvbG9yICgpIHsNCiAgICAgIHRoaXMucmVuZGVyKCkNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICByZW5kZXIgKCkgew0KICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAndW5kZWZpbmVkJykgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCg0KICAgICAgY29uc3QgcXJjb2RlID0gbmV3IFFSQ29kZUltcGwoLTEsIEVycm9yQ29ycmVjdExldmVsW3RoaXMubGV2ZWxdKQ0KICAgICAgcXJjb2RlLmFkZERhdGEodXRmMTZ0bzgodGhpcy52YWx1ZSkpDQogICAgICBxcmNvZGUubWFrZSgpDQoNCiAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuJHJlZnMuY2FudmFzDQoNCiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpDQogICAgICBjb25zdCBjZWxscyA9IHFyY29kZS5tb2R1bGVzDQogICAgICBjb25zdCB0aWxlVyA9IHRoaXMuc2l6ZSAvIGNlbGxzLmxlbmd0aA0KICAgICAgY29uc3QgdGlsZUggPSB0aGlzLnNpemUgLyBjZWxscy5sZW5ndGgNCiAgICAgIGNvbnN0IHNjYWxlID0gKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpIC8gZ2V0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyhjdHgpDQogICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLndpZHRoID0gdGhpcy5zaXplICogc2NhbGUNCiAgICAgIGN0eC5zY2FsZShzY2FsZSwgc2NhbGUpDQoNCiAgICAgIGNlbGxzLmZvckVhY2goKHJvdywgcmR4KSA9PiB7DQogICAgICAgIHJvdy5mb3JFYWNoKChjZWxsLCBjZHgpID0+IHsNCiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY2VsbCA/IHRoaXMuZmdDb2xvciA6IHRoaXMuYmdDb2xvcg0KICAgICAgICAgIGNvbnN0IHcgPSAoTWF0aC5jZWlsKChjZHggKyAxKSAqIHRpbGVXKSAtIE1hdGguZmxvb3IoY2R4ICogdGlsZVcpKQ0KICAgICAgICAgIGNvbnN0IGggPSAoTWF0aC5jZWlsKChyZHggKyAxKSAqIHRpbGVIKSAtIE1hdGguZmxvb3IocmR4ICogdGlsZUgpKQ0KICAgICAgICAgIGN0eC5maWxsUmVjdChNYXRoLnJvdW5kKGNkeCAqIHRpbGVXKSwgTWF0aC5yb3VuZChyZHggKiB0aWxlSCksIHcsIGgpDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2ltZycpIHsNCiAgICAgICAgdGhpcy5pbWdEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJykNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg0KZnVuY3Rpb24gZ2V0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyAoY3R4KSB7DQogIHJldHVybiAoDQogICAgY3R4LndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwNCiAgICBjdHgubW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fA0KICAgIGN0eC5tc0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwNCiAgICBjdHgub0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwNCiAgICBjdHguYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fA0KICAgIDENCiAgKQ0KfQ0KDQpmdW5jdGlvbiB1dGYxNnRvOCAoc3RyKSB7DQogIHZhciBvdXQsIGksIGxlbiwgYw0KICBvdXQgPSAnJw0KICBsZW4gPSBzdHIubGVuZ3RoDQogIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgew0KICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKQ0KICAgIGlmICgoYyA+PSAweDAwMDEpICYmIChjIDw9IDB4MDA3RikpIHsNCiAgICAgIG91dCArPSBzdHIuY2hhckF0KGkpDQogICAgfSBlbHNlIGlmIChjID4gMHgwN0ZGKSB7DQogICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEUwIHwgKChjID4+IDEyKSAmIDB4MEYpKQ0KICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiA2KSAmIDB4M0YpKQ0KICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiAwKSAmIDB4M0YpKQ0KICAgIH0gZWxzZSB7DQogICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEMwIHwgKChjID4+IDYpICYgMHgxRikpDQogICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweDgwIHwgKChjID4+IDApICYgMHgzRikpDQogICAgfQ0KICB9DQogIHJldHVybiBvdXQNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/vux/src/components/qrcode","sourcesContent":["<template>\r\n  <div>\r\n    <canvas\r\n    :style=\"{\r\n      height: `${size}px`,\r\n      width: `${size}px`\r\n    }\"\r\n    :height=\"size\"\r\n    :width=\"size\"\r\n    v-show=\"type === 'canvas'\"\r\n    ref=\"canvas\"></canvas>\r\n    <img\r\n    :src=\"imgData\"\r\n    v-if=\"type === 'img'\"\r\n    :style=\"{\r\n      height: `${size}px`,\r\n      width: `${size}px`\r\n    }\">\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport QRCodeImpl from 'qr.js/lib/QRCode'\r\nimport ErrorCorrectLevel from 'qr.js/lib/ErrorCorrectLevel'\r\n\r\nexport default {\r\n  name: 'qrcode',\r\n  props: {\r\n    value: String,\r\n    size: {\r\n      type: Number,\r\n      default: 160\r\n    },\r\n    level: {\r\n      type: String,\r\n      default: 'L'\r\n    },\r\n    bgColor: {\r\n      type: String,\r\n      default: '#FFFFFF'\r\n    },\r\n    fgColor: {\r\n      type: String,\r\n      default: '#000000'\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: 'img'\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      this.render()\r\n    })\r\n  },\r\n  data () {\r\n    return {\r\n      imgData: ''\r\n    }\r\n  },\r\n  watch: {\r\n    value () {\r\n      this.render()\r\n    },\r\n    size () {\r\n      this.render()\r\n    },\r\n    level () {\r\n      this.render()\r\n    },\r\n    bgColor () {\r\n      this.render()\r\n    },\r\n    fgColor () {\r\n      this.render()\r\n    }\r\n  },\r\n  methods: {\r\n    render () {\r\n      if (typeof this.value === 'undefined') {\r\n        return\r\n      }\r\n\r\n      const qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[this.level])\r\n      qrcode.addData(utf16to8(this.value))\r\n      qrcode.make()\r\n\r\n      const canvas = this.$refs.canvas\r\n\r\n      const ctx = canvas.getContext('2d')\r\n      const cells = qrcode.modules\r\n      const tileW = this.size / cells.length\r\n      const tileH = this.size / cells.length\r\n      const scale = (window.devicePixelRatio || 1) / getBackingStorePixelRatio(ctx)\r\n      canvas.height = canvas.width = this.size * scale\r\n      ctx.scale(scale, scale)\r\n\r\n      cells.forEach((row, rdx) => {\r\n        row.forEach((cell, cdx) => {\r\n          ctx.fillStyle = cell ? this.fgColor : this.bgColor\r\n          const w = (Math.ceil((cdx + 1) * tileW) - Math.floor(cdx * tileW))\r\n          const h = (Math.ceil((rdx + 1) * tileH) - Math.floor(rdx * tileH))\r\n          ctx.fillRect(Math.round(cdx * tileW), Math.round(rdx * tileH), w, h)\r\n        })\r\n      })\r\n      if (this.type === 'img') {\r\n        this.imgData = canvas.toDataURL('image/png')\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction getBackingStorePixelRatio (ctx) {\r\n  return (\r\n    ctx.webkitBackingStorePixelRatio ||\r\n    ctx.mozBackingStorePixelRatio ||\r\n    ctx.msBackingStorePixelRatio ||\r\n    ctx.oBackingStorePixelRatio ||\r\n    ctx.backingStorePixelRatio ||\r\n    1\r\n  )\r\n}\r\n\r\nfunction utf16to8 (str) {\r\n  var out, i, len, c\r\n  out = ''\r\n  len = str.length\r\n  for (i = 0; i < len; i++) {\r\n    c = str.charCodeAt(i)\r\n    if ((c >= 0x0001) && (c <= 0x007F)) {\r\n      out += str.charAt(i)\r\n    } else if (c > 0x07FF) {\r\n      out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F))\r\n      out += String.fromCharCode(0x80 | ((c >> 6) & 0x3F))\r\n      out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F))\r\n    } else {\r\n      out += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F))\r\n      out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F))\r\n    }\r\n  }\r\n  return out\r\n}\r\n</script>\r\n"]}]}