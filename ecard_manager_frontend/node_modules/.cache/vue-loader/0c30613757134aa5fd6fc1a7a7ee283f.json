{"remainingRequest":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/week-calendar/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/week-calendar/index.vue","mtime":1635777723566},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/babel-loader/lib/index.js","mtime":1635231739480},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1635231911752}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBGbGV4Ym94LCBGbGV4Ym94SXRlbSB9IGZyb20gJy4uL2ZsZXhib3gnDQppbXBvcnQgeyBTd2lwZXIsIFN3aXBlckl0ZW0gfSBmcm9tICcuLi9zd2lwZXInDQppbXBvcnQgZGF0ZUZvcm1hdCBmcm9tICcuLi8uLi90b29scy9kYXRlL2Zvcm1hdCcNCmltcG9ydCBjYWxlbmRhck1hcmtzTWl4aW4gZnJvbSAnLi4vLi4vbWl4aW5zL2NhbGVuZGFyLW1hcmtzJw0KDQovKioNCmltcG9ydCB7IEZsZXhib3gsIEZsZXhib3hJdGVtLCBTd2lwZXIsIFN3aXBlckl0ZW0sIGRhdGVGb3JtYXQgfSBmcm9tICd2dXgnDQoqKi8NCg0KY29uc3QgZ2V0TmV4dEluZGV4ID0gKGluZGV4KSA9PiB7DQogIGlmIChpbmRleCA9PT0gMikgew0KICAgIHJldHVybiAwDQogIH0NCiAgaWYgKGluZGV4ID09PSAwKSB7DQogICAgcmV0dXJuIDENCiAgfQ0KICByZXR1cm4gMg0KfQ0KDQpjb25zdCBnZXRQcmV2SW5kZXggPSBpbmRleCA9PiB7DQogIGlmIChpbmRleCA9PT0gMikgew0KICAgIHJldHVybiAxDQogIH0NCiAgaWYgKGluZGV4ID09PSAxKSB7DQogICAgcmV0dXJuIDANCiAgfQ0KICBpZiAoaW5kZXggPT09IDApIHsNCiAgICByZXR1cm4gMg0KICB9DQp9DQoNCmNvbnN0IGluZGV4TWFwID0gew0KICAwOiAnbGFzdCcsDQogIDE6ICdjdXJyZW50JywNCiAgMjogJ25leHQnDQp9DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbWl4aW5zOiBbY2FsZW5kYXJNYXJrc01peGluXSwNCiAgY29tcG9uZW50czogew0KICAgIFN3aXBlciwNCiAgICBTd2lwZXJJdGVtLA0KICAgIEZsZXhib3gsDQogICAgRmxleGJveEl0ZW0NCiAgfSwNCiAgcHJvcHM6IHsNCiAgICB2YWx1ZTogU3RyaW5nLA0KICAgIGhlaWdodDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJzY1cHgnDQogICAgfSwNCiAgICBtYXJrczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0ICgpIHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICBbMCwgNywgLTddLmZvckVhY2goaXRlbSA9PiB7DQogICAgICB0aGlzLmdldFRoaXNXZWVrUmFuZ2UoaXRlbSkNCiAgICB9KQ0KICB9LA0KICBtb3VudGVkICgpIHsNCiAgICB0aGlzLmluZGV4ID0gMQ0KICB9LA0KICB3YXRjaDogew0KICAgIHZhbHVlICh2YWwpIHsNCiAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdmFsDQogICAgICB0aGlzLmNoYW5nZURhdGEobnVsbCwgdGhpcy5pbmRleCwgdmFsKQ0KICAgIH0sDQogICAgY3VycmVudFZhbHVlICh2YWwpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsKQ0KICAgICAgdGhpcy4kZW1pdCgnb24tY2hhbmdlJywgdmFsKQ0KICAgIH0sDQogICAgY3VycmVudE1vbnRoICh2YWwpIHsNCiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jdXJyZW50TW9udGguc3BsaXQoJy0nKQ0KICAgICAgY29uc3QgZGF0YSA9IHsNCiAgICAgICAgeWVhcjogdmFsdWVbMF0sDQogICAgICAgIG1vbnRoOiB2YWx1ZVsxXQ0KICAgICAgfQ0KICAgICAgdGhpcy4kZW1pdCgnb24teWVhci1tb250aC1jaGFuZ2UnLCBkYXRhKQ0KICAgIH0NCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGN1cnJlbnRWYWx1ZTogdGhpcy52YWx1ZSwNCiAgICAgIGluZGV4OiAwLA0KICAgICAgbGFzdFdlZWtMaXN0OiBbXSwNCiAgICAgIGN1cnJlbnRXZWVrTGlzdDogW10sDQogICAgICBuZXh0V2Vla0xpc3Q6IFtdLA0KICAgICAgc3RhcnREYXRlOiBkYXRlRm9ybWF0KG5ldyBEYXRlKCksICdZWVlZLU1NLUREJyksDQogICAgICBjdXJyZW50TW9udGg6ICcnLA0KICAgICAgY2hhbmdlQ291bnQ6IC0xLA0KICAgICAgaGFzUmVuZGVyOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHN3aXRjaFZpZXdUb0N1cnJlbnRWYWx1ZSAoKSB7DQogICAgICBpZiAodGhpcy5jdXJyZW50VmFsdWUpIHsNCiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKG51bGwsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudFZhbHVlKQ0KICAgICAgfQ0KICAgIH0sDQogICAgc3dpdGNoVmlld1RvTW9udGggKHllYXIsIG1vbnRoKSB7DQogICAgICB0aGlzLmNoYW5nZURhdGEobnVsbCwgdGhpcy5pbmRleCwgYCR7eWVhcn0tJHttb250aH0tMDFgKQ0KICAgIH0sDQogICAgc3dpdGNoVmlld1RvVG9kYXkgKCkgew0KICAgICAgY29uc3QgdG9kYXkgPSBkYXRlRm9ybWF0KG5ldyBEYXRlKCksICdZWVlZLU1NLUREJykNCiAgICAgIHRoaXMuY2hhbmdlRGF0YShudWxsLCB0aGlzLmluZGV4LCB0b2RheSkNCiAgICB9LA0KICAgIG9uQ2xpY2sgKGkpIHsNCiAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gaS5mb3JtYXQNCiAgICB9LA0KICAgIG9uSW5kZXhDaGFuZ2UgKG5ld0luZGV4KSB7DQogICAgICBsZXQgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeDAwMCcgKyBuZXdJbmRleCkNCiAgICAgIGNvbnN0IHN0YXJ0ID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN0YXJ0JykNCiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGFydCkNCiAgICAgIHRoaXMuY2hhbmdlRGF0YShkYXRlLCBuZXdJbmRleCkNCiAgICB9LA0KICAgIGNoYW5nZURhdGEgKGRhdGUsIGluZGV4LCB2YWx1ZSkgew0KICAgICAgLy8gaWYgaGFzIHZhbHVlLCByZXNldCBzdGFydA0KICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgIGNvbnN0IF9kYXRlID0gbmV3IERhdGUodmFsdWUucmVwbGFjZSgvLS9nLCAnLycpKQ0KICAgICAgICBkYXRlID0gbmV3IERhdGUoX2RhdGUuc2V0RGF0ZShfZGF0ZS5nZXREYXRlKCkgLSBfZGF0ZS5nZXREYXkoKSkpDQogICAgICAgIHRoaXNbaW5kZXhNYXBbaW5kZXhdICsgJ1dlZWtMaXN0J10gPSB0aGlzLmdldFdlZWtSYW5nZShuZXcgRGF0ZShkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkpKSkNCiAgICAgIH0NCg0KICAgICAgdGhpcy5zdGFydERhdGUgPSBkYXRlRm9ybWF0KGRhdGUsICdZWVlZLU1NLUREJykNCg0KICAgICAgY29uc3QgbGFzdE1vbnRoID0gZGF0ZUZvcm1hdChkYXRlLmdldFRpbWUoKSArIDYgKiAyNCAqIDM2MDAgKiAxMDAwLCAnWVlZWS1NTScpDQogICAgICB0aGlzLmN1cnJlbnRNb250aCA9IGxhc3RNb250aA0KDQogICAgICBjb25zdCBuZXh0SW5kZXggPSBnZXROZXh0SW5kZXgoaW5kZXgpDQogICAgICBjb25zdCBuZXh0S2V5ID0gaW5kZXhNYXBbbmV4dEluZGV4XQ0KICAgICAgdGhpc1tuZXh0S2V5ICsgJ1dlZWtMaXN0J10gPSB0aGlzLmdldFdlZWtSYW5nZShuZXcgRGF0ZShkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyA3KSkpDQogICAgICBjb25zdCBsYXN0SW5kZXggPSBnZXRQcmV2SW5kZXgoaW5kZXgpDQogICAgICBjb25zdCBsYXN0S2V5ID0gaW5kZXhNYXBbbGFzdEluZGV4XQ0KICAgICAgdGhpc1tsYXN0S2V5ICsgJ1dlZWtMaXN0J10gPSB0aGlzLmdldFdlZWtSYW5nZShuZXcgRGF0ZShkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSAxNCkpKQ0KDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuY2hhbmdlQ291bnQrKw0KICAgICAgICB0aGlzLiRlbWl0KCdvbi12aWV3LWNoYW5nZScsIHsNCiAgICAgICAgICBhbGxEYXRlczogdGhpc1tpbmRleE1hcFt0aGlzLmluZGV4XSArICdXZWVrTGlzdCddDQogICAgICAgIH0sIHRoaXMuY2hhbmdlQ291bnQpDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Q3VycmVudERhdGVzICgpIHsNCiAgICAgIHJldHVybiB0aGlzW2luZGV4TWFwW3RoaXMuaW5kZXhdICsgJ1dlZWtMaXN0J10NCiAgICB9LA0KICAgIGdldEN1cnJlbnRZZWFyTW9udGggKCkgew0KICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmN1cnJlbnRNb250aC5zcGxpdCgnLScpDQogICAgICByZXR1cm4gew0KICAgICAgICB5ZWFyOiB2YWx1ZVswXSwNCiAgICAgICAgbW9udGg6IHZhbHVlWzFdDQogICAgICB9DQogICAgfSwNCiAgICBpc1RvZGF5IChkYXRlKSB7DQogICAgICByZXR1cm4gZGF0ZUZvcm1hdChkYXRlLCAnWVlZWS1NTS1ERCcpID09PSBkYXRlRm9ybWF0KG5ldyBEYXRlKCksICdZWVlZLU1NLUREJykNCiAgICB9LA0KICAgIGlzU2VsZWN0ZWQgKGRhdGUpIHsNCiAgICAgIHJldHVybiBkYXRlRm9ybWF0KGRhdGUsICdZWVlZLU1NLUREJykgPT09IHRoaXMuZGF0ZQ0KICAgIH0sDQogICAgaXNXZWVrZW5kIChkYXRlKSB7DQogICAgICByZXR1cm4gZGF0ZS5nZXREYXkoKSA9PT0gMCB8fCBkYXRlLmdldERheSgpID09PSA2DQogICAgfSwNCiAgICBnZXRXZWVrUmFuZ2UgKHN0YXJ0KSB7DQogICAgICBsZXQgcnMgPSBbew0KICAgICAgICBmb3JtYXQ6IGRhdGVGb3JtYXQoc3RhcnQsICdZWVlZLU1NLUREJyksDQogICAgICAgIGZvcm1hdGVkRGF0ZTogZGF0ZUZvcm1hdChzdGFydCwgJ1lZWVktTU0tREQnKSwNCiAgICAgICAgZGF0ZTogc3RhcnQsDQogICAgICAgIHN0cjogZGF0ZUZvcm1hdChzdGFydCwgJ0QnKSwNCiAgICAgICAgaXNXZWVrZW5kOiB0aGlzLmlzV2Vla2VuZChzdGFydCksDQogICAgICAgIGlzVG9kYXk6IHRoaXMuaXNXZWVrZW5kKHN0YXJ0KSwNCiAgICAgICAgaXNTZWxlY3RlZDogdGhpcy5pc1NlbGVjdGVkKHN0YXJ0KSwNCiAgICAgICAgX2RhdGU6IHN0YXJ0LmdldERhdGUoKQ0KICAgICAgfV0NCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNzsgaSsrKSB7DQogICAgICAgIGxldCBjdXJyZW50ID0gc3RhcnQNCiAgICAgICAgY3VycmVudC5zZXREYXRlKGN1cnJlbnQuZ2V0RGF0ZSgpICsgMSkNCiAgICAgICAgcnMucHVzaCh7DQogICAgICAgICAgZm9ybWF0OiBkYXRlRm9ybWF0KGN1cnJlbnQsICdZWVlZLU1NLUREJyksDQogICAgICAgICAgZGF0ZTogY3VycmVudCwNCiAgICAgICAgICBzdHI6IGRhdGVGb3JtYXQoY3VycmVudCwgJ0QnKSwNCiAgICAgICAgICBmb3JtYXRlZERhdGU6IGRhdGVGb3JtYXQoY3VycmVudCwgJ1lZWVktTU0tREQnKSwNCiAgICAgICAgICBpc1dlZWtlbmQ6IHRoaXMuaXNXZWVrZW5kKGN1cnJlbnQpLA0KICAgICAgICAgIGlzVG9kYXk6IHRoaXMuaXNUb2RheShjdXJyZW50KSwNCiAgICAgICAgICBpc1NlbGVjdGVkOiB0aGlzLmlzU2VsZWN0ZWQoY3VycmVudCksDQogICAgICAgICAgX2RhdGU6IGN1cnJlbnQuZ2V0RGF0ZSgpDQogICAgICAgIH0pDQogICAgICB9DQogICAgICByZXR1cm4gcnMNCiAgICB9LA0KICAgIGdldFRoaXNXZWVrUmFuZ2UgKGRheSA9IDAsIHN0YXJ0KSB7DQogICAgICBjb25zdCBub3cgPSBzdGFydCB8fCBuZXcgRGF0ZSgpDQogICAgICBjb25zdCBmaXJzdGRheSA9IG5ldyBEYXRlKG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBub3cuZ2V0RGF5KCkgKyBkYXkpKQ0KICAgICAgaWYgKGRheSA9PT0gMCkgew0KICAgICAgICB0aGlzLmN1cnJlbnRXZWVrTGlzdCA9IHRoaXMuZ2V0V2Vla1JhbmdlKGZpcnN0ZGF5KQ0KICAgICAgfQ0KICAgICAgaWYgKGRheSA9PT0gNykgew0KICAgICAgICB0aGlzLm5leHRXZWVrTGlzdCA9IHRoaXMuZ2V0V2Vla1JhbmdlKGZpcnN0ZGF5KQ0KICAgICAgfQ0KICAgICAgaWYgKGRheSA9PT0gLTcpIHsNCiAgICAgICAgdGhpcy5sYXN0V2Vla0xpc3QgPSB0aGlzLmdldFdlZWtSYW5nZShmaXJzdGRheSkNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/vux/src/components/week-calendar","sourcesContent":["<template>\r\n  <div class=\"vux-week-calendar\">\r\n\r\n    <slot name=\"header\" :current-month=\"currentMonth\"></slot>\r\n\r\n    <swiper\r\n      class=\"vux-week-calendar\"\r\n      v-model=\"index\"\r\n      :show-dots=\"false\"\r\n      :height=\"height\"\r\n      @on-index-change=\"onIndexChange\"\r\n      loop>\r\n\r\n        <template v-for=\"(item, index) in [lastWeekList, currentWeekList, nextWeekList]\">\r\n\r\n          <swiper-item :data-start=\"item[0].format\" :id=\"`x000${index}`\">\r\n            \r\n            <slot :name=\"`header-day-list-${index}`\">\r\n              <flexbox :gutter=\"0\">\r\n                <flexbox-item\r\n                class=\"vux-week-calendar-day-item\"\r\n                v-for=\"(i, index) in ['日', '一', '二', '三', '四', '五', '六']\"\r\n                :key=\"index\">\r\n                {{ i }}</flexbox-item>\r\n              </flexbox>\r\n            </slot>\r\n\r\n            <flexbox :gutter=\"0\">\r\n              <flexbox-item\r\n              class=\"vux-week-calendar-date-item\"\r\n              @click.native=\"onClick(i)\"\r\n              :class=\"{\r\n                'is-weekend': i.isWeekend,\r\n                'vux-week-calendar-is-today': i.isToday,\r\n                'vux-week-calendar-is-selected': i.format === value\r\n              }\"\r\n              v-for=\"(i, itemIndex) in item\"\r\n              :key=\"itemIndex\"\r\n              :data-date=\"i.format\">\r\n                <div class=\"vux-week-calendar-each-day-box\">\r\n                  <slot\r\n                  :name=\"`each-item-${index}`\"\r\n                  :str=\"i.str\"\r\n                  :formatedDate=\"i.format\"\r\n                  :is-weekend=\"i.isWeekend\"\r\n                  :is-today=\"i.isToday\"\r\n                  :is-selected=\"i.format === value\"\r\n                  >\r\n                    <span class=\"vux-week-calendar-each-day\" :style=\"getMarkStyle(i)\">\r\n                    {{ i.str }}\r\n                      <span class=\"vux-week-calendar-top-tip\" v-if=\"isShowTopTip(i)\" :style=\"isShowTopTip(i, 'style')\">\r\n                        <span>{{ isShowTopTip(i, 'text') }}</span>\r\n                      </span>\r\n                    </span>\r\n                    <span class=\"vux-calendar-dot\" v-show=\"isShowBottomDot(i)\"></span>\r\n                  </slot>\r\n                </div>\r\n              </flexbox-item>\r\n            </flexbox>\r\n\r\n          </swiper-item>\r\n          \r\n        </template>\r\n        \r\n      </swiper>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Flexbox, FlexboxItem } from '../flexbox'\r\nimport { Swiper, SwiperItem } from '../swiper'\r\nimport dateFormat from '../../tools/date/format'\r\nimport calendarMarksMixin from '../../mixins/calendar-marks'\r\n\r\n/**\r\nimport { Flexbox, FlexboxItem, Swiper, SwiperItem, dateFormat } from 'vux'\r\n**/\r\n\r\nconst getNextIndex = (index) => {\r\n  if (index === 2) {\r\n    return 0\r\n  }\r\n  if (index === 0) {\r\n    return 1\r\n  }\r\n  return 2\r\n}\r\n\r\nconst getPrevIndex = index => {\r\n  if (index === 2) {\r\n    return 1\r\n  }\r\n  if (index === 1) {\r\n    return 0\r\n  }\r\n  if (index === 0) {\r\n    return 2\r\n  }\r\n}\r\n\r\nconst indexMap = {\r\n  0: 'last',\r\n  1: 'current',\r\n  2: 'next'\r\n}\r\n\r\nexport default {\r\n  mixins: [calendarMarksMixin],\r\n  components: {\r\n    Swiper,\r\n    SwiperItem,\r\n    Flexbox,\r\n    FlexboxItem\r\n  },\r\n  props: {\r\n    value: String,\r\n    height: {\r\n      type: String,\r\n      default: '65px'\r\n    },\r\n    marks: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    [0, 7, -7].forEach(item => {\r\n      this.getThisWeekRange(item)\r\n    })\r\n  },\r\n  mounted () {\r\n    this.index = 1\r\n  },\r\n  watch: {\r\n    value (val) {\r\n      this.currentValue = val\r\n      this.changeData(null, this.index, val)\r\n    },\r\n    currentValue (val) {\r\n      this.$emit('input', val)\r\n      this.$emit('on-change', val)\r\n    },\r\n    currentMonth (val) {\r\n      const value = this.currentMonth.split('-')\r\n      const data = {\r\n        year: value[0],\r\n        month: value[1]\r\n      }\r\n      this.$emit('on-year-month-change', data)\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      currentValue: this.value,\r\n      index: 0,\r\n      lastWeekList: [],\r\n      currentWeekList: [],\r\n      nextWeekList: [],\r\n      startDate: dateFormat(new Date(), 'YYYY-MM-DD'),\r\n      currentMonth: '',\r\n      changeCount: -1,\r\n      hasRender: false\r\n    }\r\n  },\r\n  methods: {\r\n    switchViewToCurrentValue () {\r\n      if (this.currentValue) {\r\n        this.changeData(null, this.index, this.currentValue)\r\n      }\r\n    },\r\n    switchViewToMonth (year, month) {\r\n      this.changeData(null, this.index, `${year}-${month}-01`)\r\n    },\r\n    switchViewToToday () {\r\n      const today = dateFormat(new Date(), 'YYYY-MM-DD')\r\n      this.changeData(null, this.index, today)\r\n    },\r\n    onClick (i) {\r\n      this.currentValue = i.format\r\n    },\r\n    onIndexChange (newIndex) {\r\n      let el = document.querySelector('#x000' + newIndex)\r\n      const start = el.getAttribute('data-start')\r\n      const date = new Date(start)\r\n      this.changeData(date, newIndex)\r\n    },\r\n    changeData (date, index, value) {\r\n      // if has value, reset start\r\n      if (value) {\r\n        const _date = new Date(value.replace(/-/g, '/'))\r\n        date = new Date(_date.setDate(_date.getDate() - _date.getDay()))\r\n        this[indexMap[index] + 'WeekList'] = this.getWeekRange(new Date(date.setDate(date.getDate())))\r\n      }\r\n\r\n      this.startDate = dateFormat(date, 'YYYY-MM-DD')\r\n\r\n      const lastMonth = dateFormat(date.getTime() + 6 * 24 * 3600 * 1000, 'YYYY-MM')\r\n      this.currentMonth = lastMonth\r\n\r\n      const nextIndex = getNextIndex(index)\r\n      const nextKey = indexMap[nextIndex]\r\n      this[nextKey + 'WeekList'] = this.getWeekRange(new Date(date.setDate(date.getDate() + 7)))\r\n      const lastIndex = getPrevIndex(index)\r\n      const lastKey = indexMap[lastIndex]\r\n      this[lastKey + 'WeekList'] = this.getWeekRange(new Date(date.setDate(date.getDate() - 14)))\r\n\r\n      this.$nextTick(() => {\r\n        this.changeCount++\r\n        this.$emit('on-view-change', {\r\n          allDates: this[indexMap[this.index] + 'WeekList']\r\n        }, this.changeCount)\r\n      })\r\n    },\r\n    getCurrentDates () {\r\n      return this[indexMap[this.index] + 'WeekList']\r\n    },\r\n    getCurrentYearMonth () {\r\n      const value = this.currentMonth.split('-')\r\n      return {\r\n        year: value[0],\r\n        month: value[1]\r\n      }\r\n    },\r\n    isToday (date) {\r\n      return dateFormat(date, 'YYYY-MM-DD') === dateFormat(new Date(), 'YYYY-MM-DD')\r\n    },\r\n    isSelected (date) {\r\n      return dateFormat(date, 'YYYY-MM-DD') === this.date\r\n    },\r\n    isWeekend (date) {\r\n      return date.getDay() === 0 || date.getDay() === 6\r\n    },\r\n    getWeekRange (start) {\r\n      let rs = [{\r\n        format: dateFormat(start, 'YYYY-MM-DD'),\r\n        formatedDate: dateFormat(start, 'YYYY-MM-DD'),\r\n        date: start,\r\n        str: dateFormat(start, 'D'),\r\n        isWeekend: this.isWeekend(start),\r\n        isToday: this.isWeekend(start),\r\n        isSelected: this.isSelected(start),\r\n        _date: start.getDate()\r\n      }]\r\n      for (let i = 1; i < 7; i++) {\r\n        let current = start\r\n        current.setDate(current.getDate() + 1)\r\n        rs.push({\r\n          format: dateFormat(current, 'YYYY-MM-DD'),\r\n          date: current,\r\n          str: dateFormat(current, 'D'),\r\n          formatedDate: dateFormat(current, 'YYYY-MM-DD'),\r\n          isWeekend: this.isWeekend(current),\r\n          isToday: this.isToday(current),\r\n          isSelected: this.isSelected(current),\r\n          _date: current.getDate()\r\n        })\r\n      }\r\n      return rs\r\n    },\r\n    getThisWeekRange (day = 0, start) {\r\n      const now = start || new Date()\r\n      const firstday = new Date(now.setDate(now.getDate() - now.getDay() + day))\r\n      if (day === 0) {\r\n        this.currentWeekList = this.getWeekRange(firstday)\r\n      }\r\n      if (day === 7) {\r\n        this.nextWeekList = this.getWeekRange(firstday)\r\n      }\r\n      if (day === -7) {\r\n        this.lastWeekList = this.getWeekRange(firstday)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '../../styles/variable.less';\r\n\r\n.vux-week-calendar {\r\n  background-color: @week-calendar-bg;\r\n}\r\n.vux-week-calendar-day-item, .vux-week-calendar-date-item {\r\n  text-align: center;\r\n}\r\n.vux-week-calendar-day-item {\r\n  color: @week-calendar-header-day-item-color;\r\n}\r\n.vux-week-calendar-each-day-box {\r\n  padding: 5px 0;\r\n}\r\n.vux-week-calendar-each-day-box {\r\n  position: relative;\r\n}\r\n.vux-week-calendar-each-day {\r\n  position: relative;\r\n  background-color: transparent;\r\n  border: 1px solid transparent;\r\n  display: inline-block;\r\n  font-size: 16px;\r\n  color: @week-calendar-each-date-item-color;\r\n  width: @week-calendar-each-date-item-size;\r\n  height: @week-calendar-each-date-item-size;\r\n  line-height: @week-calendar-each-date-item-line-height;\r\n  text-align: center;\r\n  border-radius: 50%;\r\n  box-sizing: border-box;\r\n}\r\n.vux-week-calendar-is-selected .vux-week-calendar-each-day {\r\n  background-color: @week-calendar-selected-item-bg-color;\r\n  color: @week-calendar-selected-item-text-color;\r\n}\r\n.vux-calendar-dot {\r\n  display: block;\r\n  text-align: center;\r\n  width: 5px;\r\n  height: 5px;\r\n  position: absolute;\r\n  left: 50%;\r\n  bottom: 0px;\r\n  margin-left: -2.5px;\r\n  background-color: @week-calendar-dot-color;\r\n  border-radius: 50%;\r\n}\r\n.vux-week-calendar-top-tip {\r\n  position: absolute;\r\n  left: -10px;\r\n  top: 0;\r\n  font-size: 20px;\r\n  transform: scale(0.5);\r\n  transform-origin: top left;\r\n}\r\n</style>\r\n"]}]}