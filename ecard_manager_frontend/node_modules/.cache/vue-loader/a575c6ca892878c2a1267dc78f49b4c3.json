{"remainingRequest":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/x-input/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/x-input/index.vue","mtime":1635777723566},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/babel-loader/lib/index.js","mtime":1635231739480},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1635231911752}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQmFzZSBmcm9tICcuLi8uLi9saWJzL2Jhc2UnDQppbXBvcnQgSWNvbiBmcm9tICcuLi9pY29uJw0KaW1wb3J0IFRvYXN0IGZyb20gJy4uL3RvYXN0Jw0KaW1wb3J0IElubGluZURlc2MgZnJvbSAnLi4vaW5saW5lLWRlc2MnDQoNCmltcG9ydCBpc0VtYWlsIGZyb20gJ3ZhbGlkYXRvci9saWIvaXNFbWFpbCcNCmltcG9ydCBpc01vYmlsZVBob25lIGZyb20gJ3ZhbGlkYXRvci9saWIvaXNNb2JpbGVQaG9uZScNCg0KaW1wb3J0IERlYm91bmNlIGZyb20gJy4uLy4uL3Rvb2xzL2RlYm91bmNlJw0KDQppbXBvcnQgbWFzayBmcm9tICd2YW5pbGxhLW1hc2tlcicNCg0KY29uc3QgdmFsaWRhdG9ycyA9IHsNCiAgJ2VtYWlsJzogew0KICAgIGZuOiBpc0VtYWlsLA0KICAgIG1zZzogJ+mCrueuseagvOW8jycNCiAgfSwNCiAgJ2NoaW5hLW1vYmlsZSc6IHsNCiAgICBmbiAoc3RyKSB7DQogICAgICByZXR1cm4gaXNNb2JpbGVQaG9uZShzdHIsICd6aC1DTicpDQogICAgfSwNCiAgICBtc2c6ICfmiYvmnLrlj7fnoIEnDQogIH0sDQogICdjaGluYS1uYW1lJzogew0KICAgIGZuIChzdHIpIHsNCiAgICAgIHJldHVybiBzdHIubGVuZ3RoID49IDIgJiYgc3RyLmxlbmd0aCA8PSA2DQogICAgfSwNCiAgICBtc2c6ICfkuK3mloflp5PlkI0nDQogIH0NCn0NCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ3gtaW5wdXQnLA0KICBjcmVhdGVkICgpIHsNCiAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9ICh0aGlzLnZhbHVlID09PSB1bmRlZmluZWQgfHwgdGhpcy52YWx1ZSA9PT0gbnVsbCkgPyAnJyA6ICh0aGlzLm1hc2sgPyB0aGlzLm1hc2tWYWx1ZSh0aGlzLnZhbHVlKSA6IHRoaXMudmFsdWUpDQogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovDQogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7DQogICAgICBpZiAoIXRoaXMudGl0bGUgJiYgIXRoaXMucGxhY2Vob2xkZXIgJiYgIXRoaXMuY3VycmVudFZhbHVlKSB7DQogICAgICAgIGNvbnNvbGUud2Fybignbm8gdGl0bGUgYW5kIG5vIHBsYWNlaG9sZGVyPycpDQogICAgICB9DQogICAgfQ0KDQogICAgaWYgKHRoaXMucmVxdWlyZWQgJiYgKHR5cGVvZiB0aGlzLmN1cnJlbnRWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5jdXJyZW50VmFsdWUgPT09ICcnKSkgew0KICAgICAgdGhpcy52YWxpZCA9IGZhbHNlDQogICAgfQ0KICAgIHRoaXMuaGFuZGxlQ2hhbmdlRXZlbnQgPSB0cnVlDQogICAgaWYgKHRoaXMuZGVib3VuY2UpIHsNCiAgICAgIHRoaXMuX2RlYm91bmNlID0gRGVib3VuY2UoKCkgPT4gew0KICAgICAgICB0aGlzLiRlbWl0KCdvbi1jaGFuZ2UnLCB0aGlzLmN1cnJlbnRWYWx1ZSkNCiAgICAgIH0sIHRoaXMuZGVib3VuY2UpDQogICAgfQ0KICB9LA0KICBiZWZvcmVNb3VudCAoKSB7DQogICAgaWYgKHRoaXMuJHNsb3RzICYmIHRoaXMuJHNsb3RzWydyZXN0cmljdGVkLWxhYmVsJ10pIHsNCiAgICAgIHRoaXMuaGFzUmVzdHJpY3RlZExhYmVsID0gdHJ1ZQ0KICAgIH0NCiAgICBpZiAodGhpcy4kc2xvdHMgJiYgdGhpcy4kc2xvdHNbJ3JpZ2h0LWZ1bGwtaGVpZ2h0J10pIHsNCiAgICAgIHRoaXMuaGFzUmlnaHRGdWxsSGVpZ2h0U2xvdCA9IHRydWUNCiAgICB9DQogIH0sDQogIGJlZm9yZURlc3Ryb3kgKCkgew0KICAgIGlmICh0aGlzLl9kZWJvdW5jZSkgew0KICAgICAgdGhpcy5fZGVib3VuY2UuY2FuY2VsKCkNCiAgICB9DQogIH0sDQogIG1peGluczogW0Jhc2VdLA0KICBjb21wb25lbnRzOiB7DQogICAgSWNvbiwNCiAgICBJbmxpbmVEZXNjLA0KICAgIFRvYXN0DQogIH0sDQogIHByb3BzOiB7DQogICAgdGl0bGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfSwNCiAgICB0eXBlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAndGV4dCcNCiAgICB9LA0KICAgIHBsYWNlaG9sZGVyOiBTdHJpbmcsDQogICAgdmFsdWU6IFtTdHJpbmcsIE51bWJlcl0sDQogICAgbmFtZTogU3RyaW5nLA0KICAgIHJlYWRvbmx5OiBCb29sZWFuLA0KICAgIGRpc2FibGVkOiBCb29sZWFuLA0KICAgIGtleWJvYXJkOiBTdHJpbmcsDQogICAgaW5saW5lRGVzYzogU3RyaW5nLA0KICAgIGlzVHlwZTogW1N0cmluZywgRnVuY3Rpb25dLA0KICAgIG1pbjogTnVtYmVyLA0KICAgIG1heDogTnVtYmVyLA0KICAgIHNob3dDbGVhcjogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9LA0KICAgIGVxdWFsV2l0aDogU3RyaW5nLA0KICAgIHRleHRBbGlnbjogU3RyaW5nLA0KICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS95aXNpYmwvYmxvZy9pc3N1ZXMvMw0KICAgIGF1dG9jb21wbGV0ZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ29mZicNCiAgICB9LA0KICAgIGF1dG9jYXBpdGFsaXplOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnb2ZmJw0KICAgIH0sDQogICAgYXV0b2NvcnJlY3Q6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdvZmYnDQogICAgfSwNCiAgICBzcGVsbGNoZWNrOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnZmFsc2UnDQogICAgfSwNCiAgICBub3ZhbGlkYXRlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIGljb25UeXBlOiBTdHJpbmcsDQogICAgZGVib3VuY2U6IE51bWJlciwNCiAgICBwbGFjZWhvbGRlckFsaWduOiBTdHJpbmcsDQogICAgbGFiZWxXaWR0aDogU3RyaW5nLA0KICAgIG1hc2s6IFN0cmluZywNCiAgICBzaG91bGRUb2FzdEVycm9yOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBsYWJlbFN0eWxlcyAoKSB7DQogICAgICBjb25zdCB7JHBhcmVudCA9IHt9fSA9IHRoaXMNCiAgICAgIHJldHVybiB7DQogICAgICAgIHdpZHRoOiB0aGlzLmxhYmVsV2lkdGhDb21wdXRlZCB8fCAkcGFyZW50LmxhYmVsV2lkdGggfHwgdGhpcy5sYWJlbFdpZHRoQ29tcHV0ZWQsDQogICAgICAgIHRleHRBbGlnbjogJHBhcmVudC5sYWJlbEFsaWduLA0KICAgICAgICBtYXJnaW5SaWdodDogJHBhcmVudC5sYWJlbE1hcmdpblJpZ2h0DQogICAgICB9DQogICAgfSwNCiAgICBsYWJlbENsYXNzICgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgICd2dXgtY2VsbC1qdXN0aWZ5JzogdGhpcy4kcGFyZW50ICYmICh0aGlzLiRwYXJlbnQubGFiZWxBbGlnbiA9PT0gJ2p1c3RpZnknIHx8IHRoaXMuJHBhcmVudC4kcGFyZW50LmxhYmVsQWxpZ24gPT09ICdqdXN0aWZ5JykNCiAgICAgIH0NCiAgICB9LA0KICAgIHBhdHRlcm4gKCkgew0KICAgICAgaWYgKHRoaXMua2V5Ym9hcmQgPT09ICdudW1iZXInIHx8IHRoaXMuaXNUeXBlID09PSAnY2hpbmEtbW9iaWxlJykgew0KICAgICAgICByZXR1cm4gJ1swLTldKicNCiAgICAgIH0NCiAgICB9LA0KICAgIGxhYmVsV2lkdGhDb21wdXRlZCAoKSB7DQogICAgICBjb25zdCB3aWR0aCA9IHRoaXMudGl0bGUucmVwbGFjZSgvW154MDAteGZmXS9nLCAnMDAnKS5sZW5ndGggLyAyICsgMQ0KICAgICAgaWYgKHdpZHRoIDwgMTApIHsNCiAgICAgICAgcmV0dXJuIHdpZHRoICsgJ2VtJw0KICAgICAgfQ0KICAgIH0sDQogICAgaGFzRXJyb3JzICgpIHsNCiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmVycm9ycykubGVuZ3RoID4gMA0KICAgIH0sDQogICAgaW5wdXRTdHlsZSAoKSB7DQogICAgICBpZiAodGhpcy50ZXh0QWxpZ24pIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICB0ZXh0QWxpZ246IHRoaXMudGV4dEFsaWduDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dXYXJuICgpIHsNCiAgICAgIHJldHVybiAhdGhpcy5ub3ZhbGlkYXRlICYmICF0aGlzLmVxdWFsV2l0aCAmJiAhdGhpcy52YWxpZCAmJiB0aGlzLmZpcnN0RXJyb3IgJiYgKHRoaXMudG91Y2hlZCB8fCB0aGlzLmZvcmNlU2hvd0Vycm9yKQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHNjcm9sbEludG9WaWV3ICh0aW1lID0gMCkgew0KICAgICAgLy8gYWxlcnQoJ3Njcm9sbCBpbnRvIHZpZXcnKQ0KICAgICAgaWYgKC9pcGhvbmUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7DQogICAgICAgIC8vIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHsNCiAgICAgICAgLy8gYWxlcnQoJ3dpbGwgc2Nyb2xsJykNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgLy8gYWxlcnQodGhpcy4kcmVmcy5pbnB1dC5sZW5ndGgpDQogICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC5zY3JvbGxJbnRvVmlld0lmTmVlZGVkKHRydWUpDQogICAgICAgIH0sIHRpbWUpDQogICAgICB9DQogICAgfSwNCiAgICBvbkNsaWNrRXJyb3JJY29uICgpIHsNCiAgICAgIGlmICh0aGlzLnNob3VsZFRvYXN0RXJyb3IgJiYgdGhpcy5maXJzdEVycm9yKSB7DQogICAgICAgIHRoaXMuc2hvd0Vycm9yVG9hc3QgPSB0cnVlDQogICAgICB9DQogICAgICB0aGlzLiRlbWl0KCdvbi1jbGljay1lcnJvci1pY29uJywgdGhpcy5maXJzdEVycm9yKQ0KICAgIH0sDQogICAgbWFza1ZhbHVlICh2YWwpIHsNCiAgICAgIGNvbnN0IHZhbDEgPSB0aGlzLm1hc2sgPyBtYXNrLnRvUGF0dGVybih2YWwsIHRoaXMubWFzaykgOiB2YWwNCiAgICAgIHJldHVybiB2YWwxDQogICAgfSwNCiAgICByZXNldCAodmFsdWUgPSAnJykgew0KICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlDQogICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHZhbHVlDQogICAgICB0aGlzLmZpcnN0RXJyb3IgPSAnJw0KICAgICAgdGhpcy52YWxpZCA9IHRydWUNCiAgICB9LA0KICAgIGNsZWFyICgpIHsNCiAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gJycNCiAgICAgIHRoaXMuZm9jdXMoKQ0KICAgICAgdGhpcy4kZW1pdCgnb24tY2xpY2stY2xlYXItaWNvbicpDQogICAgfSwNCiAgICBmb2N1cyAoKSB7DQogICAgICB0aGlzLiRyZWZzLmlucHV0LmZvY3VzKCkNCiAgICB9LA0KICAgIGJsdXIgKCkgew0KICAgICAgdGhpcy4kcmVmcy5pbnB1dC5ibHVyKCkNCiAgICB9LA0KICAgIGZvY3VzSGFuZGxlciAoJGV2ZW50KSB7DQogICAgICB0aGlzLiRlbWl0KCdvbi1mb2N1cycsIHRoaXMuY3VycmVudFZhbHVlLCAkZXZlbnQpDQogICAgICB0aGlzLmlzRm9jdXMgPSB0cnVlDQogICAgICAvLyB0aGlzLnNjcm9sbEludG9WaWV3KDUwMCkNCiAgICAgIC8vIHRoaXMuc2Nyb2xsSW50b1ZpZXcoNTAwMCkNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAvLyDlm6DkuLrmnIkx56eS55qE5bu26L+f77yM5aaC5p6c5YiH5o2i5LqG6aG16Z2i77yMaW5wdXTlt7Lnu4/kuI3lrZjlnKjvvIzmiYDku6XliqDkuKrliKTmlq0NCiAgICAgICAgIXRoaXMuJHJlZnMuaW5wdXQgfHwgdGhpcy4kcmVmcy5pbnB1dC5zY3JvbGxJbnRvVmlld0lmTmVlZGVkKGZhbHNlKQ0KICAgICAgICAvLyB0aGlzLiRyZWZzLmlucHV0LnNjcm9sbEludG9WaWV3SWZOZWVkZWQoKQ0KICAgICAgfSwgMTAwMCkNCiAgICAgIC8vICRldmVudC50YXJnZXQuDQogICAgfSwNCiAgICBvbkJsdXIgKCRldmVudCkgew0KICAgICAgdGhpcy5zZXRUb3VjaGVkKCkNCiAgICAgIHRoaXMudmFsaWRhdGUoKQ0KICAgICAgdGhpcy5pc0ZvY3VzID0gZmFsc2UNCiAgICAgIHRoaXMuJGVtaXQoJ29uLWJsdXInLCB0aGlzLmN1cnJlbnRWYWx1ZSwgJGV2ZW50KQ0KICAgIH0sDQogICAgb25LZXlVcCAoZSkgew0KICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7DQogICAgICAgIGUudGFyZ2V0LmJsdXIoKQ0KICAgICAgICB0aGlzLiRlbWl0KCdvbi1lbnRlcicsIHRoaXMuY3VycmVudFZhbHVlLCBlKQ0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0RXJyb3IgKCkgew0KICAgICAgbGV0IGtleSA9IE9iamVjdC5rZXlzKHRoaXMuZXJyb3JzKVswXQ0KICAgICAgdGhpcy5maXJzdEVycm9yID0gdGhpcy5lcnJvcnNba2V5XQ0KICAgIH0sDQogICAgdmFsaWRhdGUgKCkgew0KICAgICAgaWYgKHR5cGVvZiB0aGlzLmVxdWFsV2l0aCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgdGhpcy52YWxpZGF0ZUVxdWFsKCkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmVycm9ycyA9IHt9DQoNCiAgICAgIGlmICghdGhpcy5jdXJyZW50VmFsdWUgJiYgIXRoaXMucmVxdWlyZWQpIHsNCiAgICAgICAgdGhpcy52YWxpZCA9IHRydWUNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQoNCiAgICAgIGlmICghdGhpcy5jdXJyZW50VmFsdWUgJiYgdGhpcy5yZXF1aXJlZCkgew0KICAgICAgICB0aGlzLnZhbGlkID0gZmFsc2UNCiAgICAgICAgdGhpcy5lcnJvcnMucmVxdWlyZWQgPSAn5b+F5aGr5ZOmJw0KICAgICAgICB0aGlzLmdldEVycm9yKCkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQoNCiAgICAgIGlmICh0eXBlb2YgdGhpcy5pc1R5cGUgPT09ICdzdHJpbmcnKSB7DQogICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IHZhbGlkYXRvcnNbdGhpcy5pc1R5cGVdDQogICAgICAgIGlmICh2YWxpZGF0b3IpIHsNCiAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZQ0KDQogICAgICAgICAgaWYgKHRoaXMuaXNUeXBlID09PSAnY2hpbmEtbW9iaWxlJyAmJiB0aGlzLm1hc2sgPT09ICc5OTkgOTk5OSA5OTk5Jykgew0KICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZS5yZXBsYWNlKC9ccysvZywgJycpDQogICAgICAgICAgfQ0KDQogICAgICAgICAgdGhpcy52YWxpZCA9IHZhbGlkYXRvclsgJ2ZuJyBdKHZhbHVlKQ0KICAgICAgICAgIGlmICghdGhpcy52YWxpZCkgew0KICAgICAgICAgICAgdGhpcy5mb3JjZVNob3dFcnJvciA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZXJyb3JzLmZvcm1hdCA9IHZhbGlkYXRvclsgJ21zZycgXSArICfmoLzlvI/kuI3lr7nlk6Z+Jw0KICAgICAgICAgICAgdGhpcy5nZXRFcnJvcigpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXJyb3JzLmZvcm1hdA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBpZiAodHlwZW9mIHRoaXMuaXNUeXBlID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgIGNvbnN0IHZhbGlkU3RhdHVzID0gdGhpcy5pc1R5cGUodGhpcy5jdXJyZW50VmFsdWUpDQogICAgICAgIHRoaXMudmFsaWQgPSB2YWxpZFN0YXR1cy52YWxpZA0KICAgICAgICBpZiAoIXRoaXMudmFsaWQpIHsNCiAgICAgICAgICB0aGlzLmVycm9ycy5mb3JtYXQgPSB2YWxpZFN0YXR1cy5tc2cNCiAgICAgICAgICB0aGlzLmZvcmNlU2hvd0Vycm9yID0gdHJ1ZQ0KICAgICAgICAgIHRoaXMuZ2V0RXJyb3IoKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGRlbGV0ZSB0aGlzLmVycm9ycy5mb3JtYXQNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBpZiAodGhpcy5taW4pIHsNCiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZhbHVlLmxlbmd0aCA8IHRoaXMubWluKSB7DQogICAgICAgICAgdGhpcy5lcnJvcnMubWluID0gYOacgOWwkeW6lOivpei+k+WFpSR7dGhpcy5taW595Liq5a2X56ym5ZOmYA0KICAgICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuZ2V0RXJyb3IoKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGRlbGV0ZSB0aGlzLmVycm9ycy5taW4NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBpZiAodGhpcy5tYXgpIHsNCiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZhbHVlLmxlbmd0aCA+IHRoaXMubWF4KSB7DQogICAgICAgICAgdGhpcy5lcnJvcnMubWF4ID0gYOacgOWkmuWPr+S7pei+k+WFpSR7dGhpcy5tYXh95Liq5a2X56ym5ZOmYA0KICAgICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuZm9yY2VTaG93RXJyb3IgPSB0cnVlDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5mb3JjZVNob3dFcnJvciA9IGZhbHNlDQogICAgICAgICAgZGVsZXRlIHRoaXMuZXJyb3JzLm1heA0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMudmFsaWQgPSB0cnVlDQogICAgfSwNCiAgICB2YWxpZGF0ZUVxdWFsICgpIHsNCiAgICAgIGlmICghdGhpcy5lcXVhbFdpdGggJiYgdGhpcy5jdXJyZW50VmFsdWUpIHsNCiAgICAgICAgdGhpcy52YWxpZCA9IGZhbHNlDQogICAgICAgIHRoaXMuZXJyb3JzLmVxdWFsID0gJ+i+k+WFpeS4jeS4gOiHtCcNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBsZXQgd2lsbENoZWNrID0gdGhpcy5kaXJ0eSB8fCB0aGlzLmN1cnJlbnRWYWx1ZS5sZW5ndGggPj0gdGhpcy5lcXVhbFdpdGgubGVuZ3RoDQogICAgICAvLyDlj6rlnKjplb/luqbnrKblkIjml7bmmL7npLrmraPnoa7kuI7lkKYNCiAgICAgIGlmICh3aWxsQ2hlY2sgJiYgdGhpcy5jdXJyZW50VmFsdWUgIT09IHRoaXMuZXF1YWxXaXRoKSB7DQogICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZQ0KICAgICAgICB0aGlzLmVycm9ycy5lcXVhbCA9ICfovpPlhaXkuI3kuIDoh7QnDQogICAgICAgIHJldHVybg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRWYWx1ZSAmJiB0aGlzLnJlcXVpcmVkKSB7DQogICAgICAgICAgdGhpcy52YWxpZCA9IGZhbHNlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy52YWxpZCA9IHRydWUNCiAgICAgICAgICBkZWxldGUgdGhpcy5lcnJvcnMuZXF1YWwNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8gIzI4MTANCiAgICBfZ2V0SW5wdXRNYXNrU2VsZWN0aW9uIChzZWxlY3Rpb24sIGRpcmVjdGlvbiwgbWFza1ZhbCwgbG9vcCkgew0KICAgICAgaWYgKCF0aGlzLm1hc2sgfHwgKGxvb3AgJiYgZGlyZWN0aW9uID09PSAwKSkgew0KICAgICAgICByZXR1cm4gc2VsZWN0aW9uDQogICAgICB9DQogICAgICBpZiAoZGlyZWN0aW9uID09PSAwKSB7DQogICAgICAgIGRpcmVjdGlvbiA9IHRoaXMubGFzdERpcmVjdGlvbg0KICAgICAgfQ0KICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHsNCiAgICAgICAgY29uc3QgbWFza0NoYXIgPSB0aGlzLm1hc2suc3Vic3RyKHNlbGVjdGlvbiAtIGRpcmVjdGlvbiwgMSkNCiAgICAgICAgaWYgKCFtYXNrQ2hhci5tYXRjaCgvWzlTQV0vKSkgew0KICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnB1dE1hc2tTZWxlY3Rpb24oc2VsZWN0aW9uICsgMSwgZGlyZWN0aW9uLCBtYXNrVmFsLCB0cnVlKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gc2VsZWN0aW9uDQogICAgfQ0KICB9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaGFzUmlnaHRGdWxsSGVpZ2h0U2xvdDogZmFsc2UsDQogICAgICBoYXNSZXN0cmljdGVkTGFiZWw6IGZhbHNlLA0KICAgICAgZmlyc3RFcnJvcjogJycsDQogICAgICBmb3JjZVNob3dFcnJvcjogZmFsc2UsDQogICAgICBoYXNMZW5ndGhFcXVhbDogZmFsc2UsDQogICAgICB2YWxpZDogdHJ1ZSwNCiAgICAgIGN1cnJlbnRWYWx1ZTogJycsDQogICAgICBzaG93RXJyb3JUb2FzdDogZmFsc2UsDQogICAgICBpc0ZvY3VzOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBtYXNrICh2YWwpIHsNCiAgICAgIGlmICh2YWwgJiYgdGhpcy5jdXJyZW50VmFsdWUpIHsNCiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLm1hc2tWYWx1ZSh0aGlzLmN1cnJlbnRWYWx1ZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHZhbGlkICgpIHsNCiAgICAgIHRoaXMuZ2V0RXJyb3IoKQ0KICAgIH0sDQogICAgdmFsdWUgKHZhbCkgew0KICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWwNCiAgICB9LA0KICAgIGVxdWFsV2l0aCAobmV3VmFsKSB7DQogICAgICBpZiAobmV3VmFsICYmIHRoaXMuZXF1YWxXaXRoKSB7DQogICAgICAgIGlmIChuZXdWYWwubGVuZ3RoID09PSB0aGlzLmVxdWFsV2l0aC5sZW5ndGgpIHsNCiAgICAgICAgICB0aGlzLmhhc0xlbmd0aEVxdWFsID0gdHJ1ZQ0KICAgICAgICB9DQogICAgICAgIHRoaXMudmFsaWRhdGVFcXVhbCgpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnZhbGlkYXRlKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGN1cnJlbnRWYWx1ZSAobmV3VmFsLCBvbGRWYWwpIHsNCiAgICAgIGxldCBzZWxlY3Rpb24gPSBudWxsDQogICAgICBpZiAoIXRoaXMuZXF1YWxXaXRoICYmIG5ld1ZhbCkgew0KICAgICAgICB0aGlzLnZhbGlkYXRlRXF1YWwoKQ0KICAgICAgfQ0KICAgICAgaWYgKG5ld1ZhbCAmJiB0aGlzLmVxdWFsV2l0aCkgew0KICAgICAgICBpZiAobmV3VmFsLmxlbmd0aCA9PT0gdGhpcy5lcXVhbFdpdGgubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy5oYXNMZW5ndGhFcXVhbCA9IHRydWUNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnZhbGlkYXRlRXF1YWwoKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy52YWxpZGF0ZSgpDQogICAgICB9DQogICAgICAvLyAjMjk2MA0KICAgICAgdHJ5IHsNCiAgICAgICAgc2VsZWN0aW9uID0gdGhpcy4kcmVmcy5pbnB1dC5zZWxlY3Rpb25TdGFydA0KICAgICAgICBsZXQgZGlyZWN0aW9uID0gbmV3VmFsLmxlbmd0aCAtIG9sZFZhbC5sZW5ndGgNCiAgICAgICAgc2VsZWN0aW9uID0gdGhpcy5fZ2V0SW5wdXRNYXNrU2VsZWN0aW9uKHNlbGVjdGlvbiwgZGlyZWN0aW9uLCB0aGlzLm1hc2tWYWx1ZShuZXdWYWwpKQ0KICAgICAgICB0aGlzLmxhc3REaXJlY3Rpb24gPSBkaXJlY3Rpb24NCiAgICAgIH0gY2F0Y2ggKGUpIHt9DQogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMubWFza1ZhbHVlKG5ld1ZhbCkpDQogICAgICAvLyAjMjgxMA0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICBpZiAodGhpcy4kcmVmcy5pbnB1dC5zZWxlY3Rpb25TdGFydCAhPT0gc2VsZWN0aW9uKSB7DQogICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC5zZWxlY3Rpb25TdGFydCA9IHNlbGVjdGlvbg0KICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuc2VsZWN0aW9uRW5kID0gc2VsZWN0aW9uDQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZhbHVlICE9PSB0aGlzLm1hc2tWYWx1ZShuZXdWYWwpKSB7DQogICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLm1hc2tWYWx1ZShuZXdWYWwpDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICAgIGlmICh0aGlzLl9kZWJvdW5jZSkgew0KICAgICAgICB0aGlzLl9kZWJvdW5jZSgpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRlbWl0KCdvbi1jaGFuZ2UnLCBuZXdWYWwpDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/vux/src/components/x-input","sourcesContent":["<template>\r\n\t<div class=\"vux-x-input weui-cell\"\r\n\t\t:class=\"{\r\n\t\t\t'weui-cell_warn': showWarn,\r\n\t\t\t'disabled': disabled,\r\n\t\t\t'vux-x-input-has-right-full': hasRightFullHeightSlot\r\n\t\t}\">\r\n    <div class=\"weui-cell__hd\">\r\n      <div :style=\"labelStyles\" v-if=\"hasRestrictedLabel\">\r\n        <slot name=\"restricted-label\"></slot>\r\n      </div>\r\n      <slot name=\"label\">\r\n        <label class=\"weui-label\" :class=\"labelClass\" :style=\"{width: labelWidth || $parent.labelWidth || labelWidthComputed, textAlign: $parent.labelAlign, marginRight: $parent.labelMarginRight}\" v-if=\"title\" v-html=\"title\" :for=\"`vux-x-input-${uuid}`\"></label>\r\n        <inline-desc v-if=\"inlineDesc\">{{ inlineDesc }}</inline-desc>\r\n      </slot>\r\n    </div>\r\n    <div class=\"weui-cell__bd weui-cell__primary\" :class=\"placeholderAlign ? `vux-x-input-placeholder-${placeholderAlign}` : ''\">\r\n      <input\r\n      :id=\"`vux-x-input-${uuid}`\"\r\n      v-if=\"!type || type === 'text'\"\r\n      class=\"weui-input\"\r\n      :maxlength=\"max\"\r\n      :autocomplete=\"autocomplete\"\r\n      :autocapitalize=\"autocapitalize\"\r\n      :autocorrect=\"autocorrect\"\r\n      :spellcheck=\"spellcheck\"\r\n      :style=\"inputStyle\"\r\n      type=\"text\"\r\n      :name=\"name\"\r\n      :pattern=\"pattern\"\r\n      :placeholder=\"placeholder\"\r\n      :readonly=\"readonly\"\r\n      :disabled=\"disabled\"\r\n      v-model=\"currentValue\"\r\n      @focus=\"focusHandler\"\r\n      @blur=\"onBlur\"\r\n      @keyup=\"onKeyUp\"\r\n      ref=\"input\"/>\r\n      <input\r\n      :id=\"`vux-x-input-${uuid}`\"\r\n      v-if=\"type === 'number'\"\r\n      class=\"weui-input\"\r\n      :maxlength=\"max\"\r\n      :autocomplete=\"autocomplete\"\r\n      :autocapitalize=\"autocapitalize\"\r\n      :autocorrect=\"autocorrect\"\r\n      :spellcheck=\"spellcheck\"\r\n      :style=\"inputStyle\"\r\n      type=\"number\"\r\n      :name=\"name\"\r\n      :pattern=\"pattern\"\r\n      :placeholder=\"placeholder\"\r\n      :readonly=\"readonly\"\r\n      :disabled=\"disabled\"\r\n      v-model=\"currentValue\"\r\n      @focus=\"focusHandler\"\r\n      @blur=\"onBlur\"\r\n      @keyup=\"onKeyUp\"\r\n      ref=\"input\"/>\r\n      <input\r\n      :id=\"`vux-x-input-${uuid}`\"\r\n      v-if=\"type === 'email'\"\r\n      class=\"weui-input\"\r\n      :maxlength=\"max\"\r\n      :autocomplete=\"autocomplete\"\r\n      :autocapitalize=\"autocapitalize\"\r\n      :autocorrect=\"autocorrect\"\r\n      :spellcheck=\"spellcheck\"\r\n      :style=\"inputStyle\"\r\n      type=\"email\"\r\n      :name=\"name\"\r\n      :pattern=\"pattern\"\r\n      :placeholder=\"placeholder\"\r\n      :readonly=\"readonly\"\r\n      :disabled=\"disabled\"\r\n      v-model=\"currentValue\"\r\n      @focus=\"focusHandler\"\r\n      @blur=\"onBlur\"\r\n      @keyup=\"onKeyUp\"\r\n      ref=\"input\"/>\r\n      <input\r\n      :id=\"`vux-x-input-${uuid}`\"\r\n      v-if=\"type === 'password'\"\r\n      class=\"weui-input\"\r\n      :maxlength=\"max\"\r\n      :autocomplete=\"autocomplete\"\r\n      :autocapitalize=\"autocapitalize\"\r\n      :autocorrect=\"autocorrect\"\r\n      :spellcheck=\"spellcheck\"\r\n      :style=\"inputStyle\"\r\n      type=\"password\"\r\n      :name=\"name\"\r\n      :pattern=\"pattern\"\r\n      :placeholder=\"placeholder\"\r\n      :readonly=\"readonly\"\r\n      :disabled=\"disabled\"\r\n      v-model=\"currentValue\"\r\n      @focus=\"focusHandler\"\r\n      @blur=\"onBlur\"\r\n      @keyup=\"onKeyUp\"\r\n      ref=\"input\"/>\r\n      <input\r\n      :id=\"`vux-x-input-${uuid}`\"\r\n      v-if=\"type === 'tel'\"\r\n      class=\"weui-input\"\r\n      :maxlength=\"max\"\r\n      :autocomplete=\"autocomplete\"\r\n      :autocapitalize=\"autocapitalize\"\r\n      :autocorrect=\"autocorrect\"\r\n      :spellcheck=\"spellcheck\"\r\n      :style=\"inputStyle\"\r\n      type=\"tel\"\r\n      :name=\"name\"\r\n      :pattern=\"pattern\"\r\n      :placeholder=\"placeholder\"\r\n      :readonly=\"readonly\"\r\n      :disabled=\"disabled\"\r\n      v-model=\"currentValue\"\r\n      @focus=\"focusHandler\"\r\n      @blur=\"onBlur\"\r\n      @keyup=\"onKeyUp\"\r\n      ref=\"input\"/>\r\n    </div>\r\n    <div class=\"weui-cell__ft\">\r\n      <icon type=\"clear\" v-show=\"!hasRightFullHeightSlot && !equalWith && showClear && currentValue !== '' && !readonly && !disabled && isFocus\" @touchstart.native=\"clear\"></icon>\r\n\r\n      <icon @click.native=\"onClickErrorIcon\" class=\"vux-input-icon\" type=\"warn\" :title=\"!valid ? firstError : ''\" v-show=\"showWarn\"></icon>\r\n      <icon @click.native=\"onClickErrorIcon\" class=\"vux-input-icon\" type=\"warn\" v-if=\"!novalidate && hasLengthEqual && dirty && equalWith && !valid\"></icon>\r\n\r\n      <icon type=\"success\" v-show=\"!novalidate && equalWith && equalWith === currentValue && valid\"></icon>\r\n\r\n      <icon type=\"success\" class=\"vux-input-icon\" v-show=\"novalidate && iconType === 'success'\"></icon>\r\n      <icon type=\"warn\" class=\"vux-input-icon\" v-show=\"novalidate && iconType === 'error'\"></icon>\r\n\r\n      <slot name=\"right\"></slot>\r\n      <div v-if=\"hasRightFullHeightSlot\" class=\"vux-x-input-right-full\">\r\n        <slot name=\"right-full-height\"></slot>\r\n      </div>\r\n    </div>\r\n\r\n    <toast\r\n    v-model=\"showErrorToast\"\r\n    type=\"text\"\r\n    width=\"auto\"\r\n    :time=\"600\">{{ firstError }}</toast>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Base from '../../libs/base'\r\nimport Icon from '../icon'\r\nimport Toast from '../toast'\r\nimport InlineDesc from '../inline-desc'\r\n\r\nimport isEmail from 'validator/lib/isEmail'\r\nimport isMobilePhone from 'validator/lib/isMobilePhone'\r\n\r\nimport Debounce from '../../tools/debounce'\r\n\r\nimport mask from 'vanilla-masker'\r\n\r\nconst validators = {\r\n  'email': {\r\n    fn: isEmail,\r\n    msg: '邮箱格式'\r\n  },\r\n  'china-mobile': {\r\n    fn (str) {\r\n      return isMobilePhone(str, 'zh-CN')\r\n    },\r\n    msg: '手机号码'\r\n  },\r\n  'china-name': {\r\n    fn (str) {\r\n      return str.length >= 2 && str.length <= 6\r\n    },\r\n    msg: '中文姓名'\r\n  }\r\n}\r\nexport default {\r\n  name: 'x-input',\r\n  created () {\r\n    this.currentValue = (this.value === undefined || this.value === null) ? '' : (this.mask ? this.maskValue(this.value) : this.value)\r\n    /* istanbul ignore if */\r\n    if (process.env.NODE_ENV === 'development') {\r\n      if (!this.title && !this.placeholder && !this.currentValue) {\r\n        console.warn('no title and no placeholder?')\r\n      }\r\n    }\r\n\r\n    if (this.required && (typeof this.currentValue === 'undefined' || this.currentValue === '')) {\r\n      this.valid = false\r\n    }\r\n    this.handleChangeEvent = true\r\n    if (this.debounce) {\r\n      this._debounce = Debounce(() => {\r\n        this.$emit('on-change', this.currentValue)\r\n      }, this.debounce)\r\n    }\r\n  },\r\n  beforeMount () {\r\n    if (this.$slots && this.$slots['restricted-label']) {\r\n      this.hasRestrictedLabel = true\r\n    }\r\n    if (this.$slots && this.$slots['right-full-height']) {\r\n      this.hasRightFullHeightSlot = true\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    if (this._debounce) {\r\n      this._debounce.cancel()\r\n    }\r\n  },\r\n  mixins: [Base],\r\n  components: {\r\n    Icon,\r\n    InlineDesc,\r\n    Toast\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: 'text'\r\n    },\r\n    placeholder: String,\r\n    value: [String, Number],\r\n    name: String,\r\n    readonly: Boolean,\r\n    disabled: Boolean,\r\n    keyboard: String,\r\n    inlineDesc: String,\r\n    isType: [String, Function],\r\n    min: Number,\r\n    max: Number,\r\n    showClear: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    equalWith: String,\r\n    textAlign: String,\r\n    // https://github.com/yisibl/blog/issues/3\r\n    autocomplete: {\r\n      type: String,\r\n      default: 'off'\r\n    },\r\n    autocapitalize: {\r\n      type: String,\r\n      default: 'off'\r\n    },\r\n    autocorrect: {\r\n      type: String,\r\n      default: 'off'\r\n    },\r\n    spellcheck: {\r\n      type: String,\r\n      default: 'false'\r\n    },\r\n    novalidate: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    iconType: String,\r\n    debounce: Number,\r\n    placeholderAlign: String,\r\n    labelWidth: String,\r\n    mask: String,\r\n    shouldToastError: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  computed: {\r\n    labelStyles () {\r\n      const {$parent = {}} = this\r\n      return {\r\n        width: this.labelWidthComputed || $parent.labelWidth || this.labelWidthComputed,\r\n        textAlign: $parent.labelAlign,\r\n        marginRight: $parent.labelMarginRight\r\n      }\r\n    },\r\n    labelClass () {\r\n      return {\r\n        'vux-cell-justify': this.$parent && (this.$parent.labelAlign === 'justify' || this.$parent.$parent.labelAlign === 'justify')\r\n      }\r\n    },\r\n    pattern () {\r\n      if (this.keyboard === 'number' || this.isType === 'china-mobile') {\r\n        return '[0-9]*'\r\n      }\r\n    },\r\n    labelWidthComputed () {\r\n      const width = this.title.replace(/[^x00-xff]/g, '00').length / 2 + 1\r\n      if (width < 10) {\r\n        return width + 'em'\r\n      }\r\n    },\r\n    hasErrors () {\r\n      return Object.keys(this.errors).length > 0\r\n    },\r\n    inputStyle () {\r\n      if (this.textAlign) {\r\n        return {\r\n          textAlign: this.textAlign\r\n        }\r\n      }\r\n    },\r\n    showWarn () {\r\n      return !this.novalidate && !this.equalWith && !this.valid && this.firstError && (this.touched || this.forceShowError)\r\n    }\r\n  },\r\n  methods: {\r\n    scrollIntoView (time = 0) {\r\n      // alert('scroll into view')\r\n      if (/iphone/i.test(navigator.userAgent)) {\r\n        // return\r\n      }\r\n      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {\r\n        // alert('will scroll')\r\n        setTimeout(() => {\r\n          // alert(this.$refs.input.length)\r\n          this.$refs.input.scrollIntoViewIfNeeded(true)\r\n        }, time)\r\n      }\r\n    },\r\n    onClickErrorIcon () {\r\n      if (this.shouldToastError && this.firstError) {\r\n        this.showErrorToast = true\r\n      }\r\n      this.$emit('on-click-error-icon', this.firstError)\r\n    },\r\n    maskValue (val) {\r\n      const val1 = this.mask ? mask.toPattern(val, this.mask) : val\r\n      return val1\r\n    },\r\n    reset (value = '') {\r\n      this.dirty = false\r\n      this.currentValue = value\r\n      this.firstError = ''\r\n      this.valid = true\r\n    },\r\n    clear () {\r\n      this.currentValue = ''\r\n      this.focus()\r\n      this.$emit('on-click-clear-icon')\r\n    },\r\n    focus () {\r\n      this.$refs.input.focus()\r\n    },\r\n    blur () {\r\n      this.$refs.input.blur()\r\n    },\r\n    focusHandler ($event) {\r\n      this.$emit('on-focus', this.currentValue, $event)\r\n      this.isFocus = true\r\n      // this.scrollIntoView(500)\r\n      // this.scrollIntoView(5000)\r\n      setTimeout(() => {\r\n        // 因为有1秒的延迟，如果切换了页面，input已经不存在，所以加个判断\r\n        !this.$refs.input || this.$refs.input.scrollIntoViewIfNeeded(false)\r\n        // this.$refs.input.scrollIntoViewIfNeeded()\r\n      }, 1000)\r\n      // $event.target.\r\n    },\r\n    onBlur ($event) {\r\n      this.setTouched()\r\n      this.validate()\r\n      this.isFocus = false\r\n      this.$emit('on-blur', this.currentValue, $event)\r\n    },\r\n    onKeyUp (e) {\r\n      if (e.key === 'Enter') {\r\n        e.target.blur()\r\n        this.$emit('on-enter', this.currentValue, e)\r\n      }\r\n    },\r\n    getError () {\r\n      let key = Object.keys(this.errors)[0]\r\n      this.firstError = this.errors[key]\r\n    },\r\n    validate () {\r\n      if (typeof this.equalWith !== 'undefined') {\r\n        this.validateEqual()\r\n        return\r\n      }\r\n      this.errors = {}\r\n\r\n      if (!this.currentValue && !this.required) {\r\n        this.valid = true\r\n        return\r\n      }\r\n\r\n      if (!this.currentValue && this.required) {\r\n        this.valid = false\r\n        this.errors.required = '必填哦'\r\n        this.getError()\r\n        return\r\n      }\r\n\r\n      if (typeof this.isType === 'string') {\r\n        const validator = validators[this.isType]\r\n        if (validator) {\r\n          let value = this.currentValue\r\n\r\n          if (this.isType === 'china-mobile' && this.mask === '999 9999 9999') {\r\n            value = this.currentValue.replace(/\\s+/g, '')\r\n          }\r\n\r\n          this.valid = validator[ 'fn' ](value)\r\n          if (!this.valid) {\r\n            this.forceShowError = true\r\n            this.errors.format = validator[ 'msg' ] + '格式不对哦~'\r\n            this.getError()\r\n            return\r\n          } else {\r\n            delete this.errors.format\r\n          }\r\n        }\r\n      }\r\n\r\n      if (typeof this.isType === 'function') {\r\n        const validStatus = this.isType(this.currentValue)\r\n        this.valid = validStatus.valid\r\n        if (!this.valid) {\r\n          this.errors.format = validStatus.msg\r\n          this.forceShowError = true\r\n          this.getError()\r\n          return\r\n        } else {\r\n          delete this.errors.format\r\n        }\r\n      }\r\n\r\n      if (this.min) {\r\n        if (this.currentValue.length < this.min) {\r\n          this.errors.min = `最少应该输入${this.min}个字符哦`\r\n          this.valid = false\r\n          this.getError()\r\n          return\r\n        } else {\r\n          delete this.errors.min\r\n        }\r\n      }\r\n\r\n      if (this.max) {\r\n        if (this.currentValue.length > this.max) {\r\n          this.errors.max = `最多可以输入${this.max}个字符哦`\r\n          this.valid = false\r\n          this.forceShowError = true\r\n          return\r\n        } else {\r\n          this.forceShowError = false\r\n          delete this.errors.max\r\n        }\r\n      }\r\n\r\n      this.valid = true\r\n    },\r\n    validateEqual () {\r\n      if (!this.equalWith && this.currentValue) {\r\n        this.valid = false\r\n        this.errors.equal = '输入不一致'\r\n        return\r\n      }\r\n      let willCheck = this.dirty || this.currentValue.length >= this.equalWith.length\r\n      // 只在长度符合时显示正确与否\r\n      if (willCheck && this.currentValue !== this.equalWith) {\r\n        this.valid = false\r\n        this.errors.equal = '输入不一致'\r\n        return\r\n      } else {\r\n        if (!this.currentValue && this.required) {\r\n          this.valid = false\r\n        } else {\r\n          this.valid = true\r\n          delete this.errors.equal\r\n        }\r\n      }\r\n    },\r\n    // #2810\r\n    _getInputMaskSelection (selection, direction, maskVal, loop) {\r\n      if (!this.mask || (loop && direction === 0)) {\r\n        return selection\r\n      }\r\n      if (direction === 0) {\r\n        direction = this.lastDirection\r\n      }\r\n      if (direction > 0) {\r\n        const maskChar = this.mask.substr(selection - direction, 1)\r\n        if (!maskChar.match(/[9SA]/)) {\r\n          return this._getInputMaskSelection(selection + 1, direction, maskVal, true)\r\n        }\r\n      }\r\n      return selection\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      hasRightFullHeightSlot: false,\r\n      hasRestrictedLabel: false,\r\n      firstError: '',\r\n      forceShowError: false,\r\n      hasLengthEqual: false,\r\n      valid: true,\r\n      currentValue: '',\r\n      showErrorToast: false,\r\n      isFocus: false\r\n    }\r\n  },\r\n  watch: {\r\n    mask (val) {\r\n      if (val && this.currentValue) {\r\n        this.currentValue = this.maskValue(this.currentValue)\r\n      }\r\n    },\r\n    valid () {\r\n      this.getError()\r\n    },\r\n    value (val) {\r\n      this.currentValue = val\r\n    },\r\n    equalWith (newVal) {\r\n      if (newVal && this.equalWith) {\r\n        if (newVal.length === this.equalWith.length) {\r\n          this.hasLengthEqual = true\r\n        }\r\n        this.validateEqual()\r\n      } else {\r\n        this.validate()\r\n      }\r\n    },\r\n    currentValue (newVal, oldVal) {\r\n      let selection = null\r\n      if (!this.equalWith && newVal) {\r\n        this.validateEqual()\r\n      }\r\n      if (newVal && this.equalWith) {\r\n        if (newVal.length === this.equalWith.length) {\r\n          this.hasLengthEqual = true\r\n        }\r\n        this.validateEqual()\r\n      } else {\r\n        this.validate()\r\n      }\r\n      // #2960\r\n      try {\r\n        selection = this.$refs.input.selectionStart\r\n        let direction = newVal.length - oldVal.length\r\n        selection = this._getInputMaskSelection(selection, direction, this.maskValue(newVal))\r\n        this.lastDirection = direction\r\n      } catch (e) {}\r\n      this.$emit('input', this.maskValue(newVal))\r\n      // #2810\r\n      this.$nextTick(() => {\r\n        if (this.$refs.input.selectionStart !== selection) {\r\n          this.$refs.input.selectionStart = selection\r\n          this.$refs.input.selectionEnd = selection\r\n        }\r\n        if (this.currentValue !== this.maskValue(newVal)) {\r\n          this.currentValue = this.maskValue(newVal)\r\n        }\r\n      })\r\n\r\n      if (this._debounce) {\r\n        this._debounce()\r\n      } else {\r\n        this.$emit('on-change', newVal)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import '../../styles/weui/widget/weui_cell/weui_access';\r\n@import '../../styles/weui/widget/weui_cell/weui_cell_global';\r\n@import '../../styles/weui/widget/weui_cell/weui_form/weui_form_common';\r\n@import '../../styles/weui/widget/weui_cell/weui_form/weui_vcode';\r\n\r\n.vux-x-input .vux-x-input-placeholder-right input::-webkit-input-placeholder {\r\n  text-align: right;\r\n}\r\n.vux-x-input .vux-x-input-placeholder-center input::-webkit-input-placeholder {\r\n  text-align: center;\r\n}\r\n.vux-x-input .vux-input-icon {\r\n  font-size: 21px;\r\n}\r\n.vux-input-icon.weui-icon-warn:before, .vux-input-icon.weui-icon-success:before {\r\n  font-size: 21px;\r\n}\r\n.vux-x-input .weui-icon {\r\n  padding-left: 5px;\r\n}\r\n.vux-x-input.weui-cell_vcode {\r\n  padding-top: 0;\r\n  padding-right: 0;\r\n  padding-bottom: 0;\r\n}\r\n.vux-x-input.disabled {\r\n  .weui-input {\r\n    text-fill-color: #888;\r\n    -webkit-text-fill-color: #888; /* Override iOS / Android font color change */\r\n    opacity: 1; /* Override iOS opacity change affecting text & background color */\r\n  }\r\n}\r\n.vux-x-input-right-full {\r\n  margin-left: 5px;\r\n  height: @weuiCellHeight;\r\n  vertical-align: middle;\r\n\t& img {\r\n\t\theight: @weuiCellHeight;\r\n\t}\r\n}\r\n.vux-x-input-has-right-full {\r\n  padding-top: 0;\r\n  padding-right: 0;\r\n  padding-bottom: 0;\r\n}\r\n</style>\r\n"]}]}