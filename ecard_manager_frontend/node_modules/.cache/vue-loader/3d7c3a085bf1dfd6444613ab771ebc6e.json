{"remainingRequest":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/x-form/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/x-form/form.vue","mtime":1635777723566},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/babel-loader/lib/index.js","mtime":1635231739480},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1635231911752}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdWdXhGb3JtJywNCiAgcHJvdmlkZSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHRoaXMNCiAgICB9DQogIH0sDQogIHByb3BzOiB7DQogICAgbW9kZWw6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgICAgcmV0dXJuIHt9DQogICAgICB9DQogICAgfQ0KICB9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybUZpZWxkczogW10NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB2YWxpZGF0ZSAoY2IpIHsNCiAgICAgIGxldCBwcm9taXNlDQogICAgICAvLyBpZiBubyBjYWxsYmFjaywgcmV0dXJuIHByb21pc2UNCiAgICAgIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicgJiYgd2luZG93LlByb21pc2UpIHsNCiAgICAgICAgcHJvbWlzZSA9IG5ldyB3aW5kb3cuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgICAgY2IgPSBmdW5jdGlvbiAodmFsaWQpIHsNCiAgICAgICAgICAgIHZhbGlkID8gcmVzb2x2ZSh2YWxpZCkgOiByZWplY3QodmFsaWQpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgY29uc3QgeyBmb3JtRmllbGRzIH0gPSB0aGlzDQogICAgICBsZXQgdmFsaWQgPSB0cnVlDQogICAgICBsZXQgY291bnQgPSAwDQogICAgICBsZXQgaW52YWxpZEZpZWxkcyA9IHt9DQogICAgICBmb3JtRmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7DQogICAgICAgIGZpZWxkLnZhbGlkYXRlKChtZXNzYWdlLCBmaWVsZCkgPT4gew0KICAgICAgICAgIGlmIChtZXNzYWdlKSB2YWxpZCA9IGZhbHNlDQogICAgICAgICAgaW52YWxpZEZpZWxkcyA9IE9iamVjdC5hc3NpZ24oe30sIGludmFsaWRGaWVsZHMsIGZpZWxkKQ0KICAgICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgJiYgKytjb3VudCA9PT0gZm9ybUZpZWxkcy5sZW5ndGgpIHsNCiAgICAgICAgICAgIGNiKHZhbGlkLCBpbnZhbGlkRmllbGRzKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICBpZiAocHJvbWlzZSkgew0KICAgICAgICByZXR1cm4gcHJvbWlzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgYWRkRmllbGQgKGZpZWxkKSB7DQogICAgICB0aGlzLmZvcm1GaWVsZHMucHVzaChmaWVsZCkNCiAgICB9LA0KICAgIHJlbW92ZUZpZWxkIChmaWVsZCkgew0KICAgICAgaWYgKGZpZWxkLnByb3ApIHsNCiAgICAgICAgdGhpcy5mb3JtRmllbGRzLnNwbGljZSh0aGlzLmZvcm1GaWVsZHMuaW5kZXhPZihmaWVsZCksIDEpDQogICAgICB9DQogICAgfSwNCiAgICByZXNldEZpZWxkcyAoKSB7DQogICAgICBpZiAoIXRoaXMubW9kZWwpIHsNCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUNCiAgICAgICAgY29uc29sZS53YXJuKA0KICAgICAgICAgICdbdnV4LWZvcm0gd2Fybl1tb2RlbCBpcyByZXF1aXJlZCBmb3IgcmVzZXRGaWVsZHMgdG8gd29yay4nDQogICAgICAgICkNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybUZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4gew0KICAgICAgICBmaWVsZC5yZXNldEZpZWxkKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBjbGVhclZhbGlkYXRlIChwcm9wcyA9IFtdKSB7DQogICAgICBjb25zdCBmaWVsZHMgPSBwcm9wcy5sZW5ndGgNCiAgICAgICAgPyB0eXBlb2YgcHJvcHMgPT09ICdzdHJpbmcnDQogICAgICAgICAgPyB0aGlzLmZvcm1GaWVsZHMuZmlsdGVyKChmaWVsZCkgPT4gcHJvcHMgPT09IGZpZWxkLnByb3ApDQogICAgICAgICAgOiB0aGlzLmZvcm1GaWVsZHMuZmlsdGVyKChmaWVsZCkgPT4gcHJvcHMuaW5kZXhPZihmaWVsZC5wcm9wKSA+IC0xKQ0KICAgICAgICA6IHRoaXMuZm9ybUZpZWxkcw0KICAgICAgZmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7DQogICAgICAgIGZpZWxkLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"node_modules/vux/src/components/x-form","sourcesContent":["<template>\r\n  <form\r\n    ref=\"form\"\r\n    class=\"vux-form\"\r\n  >\r\n    <slot></slot>\r\n  </form>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'VuxForm',\r\n  provide () {\r\n    return {\r\n      form: this\r\n    }\r\n  },\r\n  props: {\r\n    model: {\r\n      type: Object,\r\n      default: () => {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      formFields: []\r\n    }\r\n  },\r\n  methods: {\r\n    validate (cb) {\r\n      let promise\r\n      // if no callback, return promise\r\n      if (typeof cb !== 'function' && window.Promise) {\r\n        promise = new window.Promise((resolve, reject) => {\r\n          cb = function (valid) {\r\n            valid ? resolve(valid) : reject(valid)\r\n          }\r\n        })\r\n      }\r\n      const { formFields } = this\r\n      let valid = true\r\n      let count = 0\r\n      let invalidFields = {}\r\n      formFields.forEach((field) => {\r\n        field.validate((message, field) => {\r\n          if (message) valid = false\r\n          invalidFields = Object.assign({}, invalidFields, field)\r\n          if (typeof cb === 'function' && ++count === formFields.length) {\r\n            cb(valid, invalidFields)\r\n          }\r\n        })\r\n      })\r\n      if (promise) {\r\n        return promise\r\n      }\r\n    },\r\n    addField (field) {\r\n      this.formFields.push(field)\r\n    },\r\n    removeField (field) {\r\n      if (field.prop) {\r\n        this.formFields.splice(this.formFields.indexOf(field), 1)\r\n      }\r\n    },\r\n    resetFields () {\r\n      if (!this.model) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn(\r\n          '[vux-form warn]model is required for resetFields to work.'\r\n        )\r\n      }\r\n      this.formFields.forEach((field) => {\r\n        field.resetField()\r\n      })\r\n    },\r\n    clearValidate (props = []) {\r\n      const fields = props.length\r\n        ? typeof props === 'string'\r\n          ? this.formFields.filter((field) => props === field.prop)\r\n          : this.formFields.filter((field) => props.indexOf(field.prop) > -1)\r\n        : this.formFields\r\n      fields.forEach((field) => {\r\n        field.clearValidate()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n</style>\r\n"]}]}