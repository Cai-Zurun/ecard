{"remainingRequest":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/babel-loader/lib/index.js!/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/x-form/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vux/src/components/x-form/form.vue","mtime":1635777723566},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/babel.config.js","mtime":1635402255166},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/babel-loader/lib/index.js","mtime":1635231739480},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635231739476},{"path":"/Users/zrun/vueSpace/ecard_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1635231911752}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Z1eEZvcm0nLAogIHByb3ZpZGU6IGZ1bmN0aW9uIHByb3ZpZGUoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB0aGlzCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGVsOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybUZpZWxkczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoY2IpIHsKICAgICAgdmFyIHByb21pc2U7IC8vIGlmIG5vIGNhbGxiYWNrLCByZXR1cm4gcHJvbWlzZQoKICAgICAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJyAmJiB3aW5kb3cuUHJvbWlzZSkgewogICAgICAgIHByb21pc2UgPSBuZXcgd2luZG93LlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgY2IgPSBmdW5jdGlvbiBjYih2YWxpZCkgewogICAgICAgICAgICB2YWxpZCA/IHJlc29sdmUodmFsaWQpIDogcmVqZWN0KHZhbGlkKTsKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBmb3JtRmllbGRzID0gdGhpcy5mb3JtRmllbGRzOwogICAgICB2YXIgdmFsaWQgPSB0cnVlOwogICAgICB2YXIgY291bnQgPSAwOwogICAgICB2YXIgaW52YWxpZEZpZWxkcyA9IHt9OwogICAgICBmb3JtRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgICAgZmllbGQudmFsaWRhdGUoZnVuY3Rpb24gKG1lc3NhZ2UsIGZpZWxkKSB7CiAgICAgICAgICBpZiAobWVzc2FnZSkgdmFsaWQgPSBmYWxzZTsKICAgICAgICAgIGludmFsaWRGaWVsZHMgPSBPYmplY3QuYXNzaWduKHt9LCBpbnZhbGlkRmllbGRzLCBmaWVsZCk7CgogICAgICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiArK2NvdW50ID09PSBmb3JtRmllbGRzLmxlbmd0aCkgewogICAgICAgICAgICBjYih2YWxpZCwgaW52YWxpZEZpZWxkcyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgaWYgKHByb21pc2UpIHsKICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgfQogICAgfSwKICAgIGFkZEZpZWxkOiBmdW5jdGlvbiBhZGRGaWVsZChmaWVsZCkgewogICAgICB0aGlzLmZvcm1GaWVsZHMucHVzaChmaWVsZCk7CiAgICB9LAogICAgcmVtb3ZlRmllbGQ6IGZ1bmN0aW9uIHJlbW92ZUZpZWxkKGZpZWxkKSB7CiAgICAgIGlmIChmaWVsZC5wcm9wKSB7CiAgICAgICAgdGhpcy5mb3JtRmllbGRzLnNwbGljZSh0aGlzLmZvcm1GaWVsZHMuaW5kZXhPZihmaWVsZCksIDEpOwogICAgICB9CiAgICB9LAogICAgcmVzZXRGaWVsZHM6IGZ1bmN0aW9uIHJlc2V0RmllbGRzKCkgewogICAgICBpZiAoIXRoaXMubW9kZWwpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgIGNvbnNvbGUud2FybignW3Z1eC1mb3JtIHdhcm5dbW9kZWwgaXMgcmVxdWlyZWQgZm9yIHJlc2V0RmllbGRzIHRvIHdvcmsuJyk7CiAgICAgIH0KCiAgICAgIHRoaXMuZm9ybUZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgIGZpZWxkLnJlc2V0RmllbGQoKTsKICAgICAgfSk7CiAgICB9LAogICAgY2xlYXJWYWxpZGF0ZTogZnVuY3Rpb24gY2xlYXJWYWxpZGF0ZSgpIHsKICAgICAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKICAgICAgdmFyIGZpZWxkcyA9IHByb3BzLmxlbmd0aCA/IHR5cGVvZiBwcm9wcyA9PT0gJ3N0cmluZycgPyB0aGlzLmZvcm1GaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgIHJldHVybiBwcm9wcyA9PT0gZmllbGQucHJvcDsKICAgICAgfSkgOiB0aGlzLmZvcm1GaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgIHJldHVybiBwcm9wcy5pbmRleE9mKGZpZWxkLnByb3ApID4gLTE7CiAgICAgIH0pIDogdGhpcy5mb3JtRmllbGRzOwogICAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICBmaWVsZC5jbGVhclZhbGlkYXRlKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["form.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <form\r\n    ref=\"form\"\r\n    class=\"vux-form\"\r\n  >\r\n    <slot></slot>\r\n  </form>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'VuxForm',\r\n  provide () {\r\n    return {\r\n      form: this\r\n    }\r\n  },\r\n  props: {\r\n    model: {\r\n      type: Object,\r\n      default: () => {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      formFields: []\r\n    }\r\n  },\r\n  methods: {\r\n    validate (cb) {\r\n      let promise\r\n      // if no callback, return promise\r\n      if (typeof cb !== 'function' && window.Promise) {\r\n        promise = new window.Promise((resolve, reject) => {\r\n          cb = function (valid) {\r\n            valid ? resolve(valid) : reject(valid)\r\n          }\r\n        })\r\n      }\r\n      const { formFields } = this\r\n      let valid = true\r\n      let count = 0\r\n      let invalidFields = {}\r\n      formFields.forEach((field) => {\r\n        field.validate((message, field) => {\r\n          if (message) valid = false\r\n          invalidFields = Object.assign({}, invalidFields, field)\r\n          if (typeof cb === 'function' && ++count === formFields.length) {\r\n            cb(valid, invalidFields)\r\n          }\r\n        })\r\n      })\r\n      if (promise) {\r\n        return promise\r\n      }\r\n    },\r\n    addField (field) {\r\n      this.formFields.push(field)\r\n    },\r\n    removeField (field) {\r\n      if (field.prop) {\r\n        this.formFields.splice(this.formFields.indexOf(field), 1)\r\n      }\r\n    },\r\n    resetFields () {\r\n      if (!this.model) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn(\r\n          '[vux-form warn]model is required for resetFields to work.'\r\n        )\r\n      }\r\n      this.formFields.forEach((field) => {\r\n        field.resetField()\r\n      })\r\n    },\r\n    clearValidate (props = []) {\r\n      const fields = props.length\r\n        ? typeof props === 'string'\r\n          ? this.formFields.filter((field) => props === field.prop)\r\n          : this.formFields.filter((field) => props.indexOf(field.prop) > -1)\r\n        : this.formFields\r\n      fields.forEach((field) => {\r\n        field.clearValidate()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n</style>\r\n"],"sourceRoot":"node_modules/vux/src/components/x-form"}]}