(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f6a62dc"],{"5eb7":function(e,t,s){},"6c9d":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table"},[s("div",{staticClass:"container"},[s("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"",name:"1"}},[s("template",{slot:"title"},[s("i",{staticClass:"header-icon el-icon-search"}),e._v("查询条件： ")]),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{sm:5}},[s("el-select",{attrs:{placeholder:"请选择学校"},on:{change:e.changeSchoolCopy},model:{value:e.searchCondition.schoolId,callback:function(t){e.$set(e.searchCondition,"schoolId",t)},expression:"searchCondition.schoolId"}},e._l(e.selectSchoolCopy,(function(e){return s("el-option",{key:e.id,attrs:{label:e.schoolName,value:e.id}})})),1)],1),s("el-col",{attrs:{sm:5}},[s("el-select",{attrs:{placeholder:"请选择年级"},on:{change:e.changeGradeCopy},model:{value:e.searchCondition.gradeId,callback:function(t){e.$set(e.searchCondition,"gradeId",t)},expression:"searchCondition.gradeId"}},e._l(e.selectGradeCopy,(function(e){return s("el-option",{key:e.id,attrs:{label:e.gradeName,value:e.id}})})),1)],1),s("el-col",{attrs:{sm:5}},[s("el-select",{attrs:{placeholder:"请选择班级"},model:{value:e.searchCondition.classId,callback:function(t){e.$set(e.searchCondition,"classId",t)},expression:"searchCondition.classId"}},e._l(e.selectClassCopy,(function(e){return s("el-option",{key:e.id,attrs:{label:e.className,value:e.id}})})),1)],1),s("el-col",{attrs:{sm:5}},[s("el-select",{attrs:{placeholder:"设备类型"},model:{value:e.searchCondition.deviceCode,callback:function(t){e.$set(e.searchCondition,"deviceCode",t)},expression:"searchCondition.deviceCode"}},e._l(e.selectDeviceTypeCopy,(function(e){return s("el-option",{key:e.id,attrs:{label:e.propListName,value:e.propListCode}})})),1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{sm:5}},[s("el-input",{attrs:{placeholder:"IMEI号"},model:{value:e.searchCondition.imei,callback:function(t){e.$set(e.searchCondition,"imei",t)},expression:"searchCondition.imei"}})],1),s("el-col",{attrs:{sm:5}},[s("el-input",{attrs:{placeholder:"学生姓名"},model:{value:e.searchCondition.studentName,callback:function(t){e.$set(e.searchCondition,"studentName",t)},expression:"searchCondition.studentName"}})],1),s("el-col",{attrs:{sm:5}},[s("el-input",{attrs:{placeholder:"手机号"},model:{value:e.searchCondition.phone,callback:function(t){e.$set(e.searchCondition,"phone",t)},expression:"searchCondition.phone"}})],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:7}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchInfo}},[e._v("搜索")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],2),s("el-collapse-item",{attrs:{name:"2"}},[s("template",{slot:"title"},[s("i",{staticClass:"header-icon el-icon-lx-cascades"}),e._v("查询结果： ")]),s("div",{staticClass:"handle-box"},[s("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-folder-add"},on:{click:e.addData}},[e._v("新增")]),s("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-folder-delete"},on:{click:e.batchDelete}},[e._v("批量删除")]),s("el-popover",{attrs:{placement:"bottom-end",trigger:"click"}},[e._l(e.headerFilter,(function(t,i){return s("div",{key:i},[s("el-checkbox",{model:{value:t.selected,callback:function(s){e.$set(t,"selected",s)},expression:"item.selected"}},[e._v(e._s(t.label))])],1)})),s("el-button",{staticClass:"mr10 wzg-float-right",attrs:{slot:"reference",circle:""},slot:"reference"},[s("i",{staticClass:"iconfont iconguolv"})])],2)],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","reserve-selection":!0},on:{"row-dblclick":e.rowDblclick}},[s("el-table-column",{attrs:{type:"index",align:"center"}}),s("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.headerFilter,(function(t,i){return[t.selected?s("el-table-column",{key:i,attrs:{prop:t.prop,align:"center",label:t.label,formatter:t.formatter}}):e._e()]})),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(s){return e.handleViewEdit(t.$index,t.row,"view","查看")}}},[e._v("查看")]),s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleViewEdit(t.$index,t.row,"edit","编辑")}}},[e._v("编辑")]),s("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.searchCondition.pageSize,"current-page":e.searchCondition.pageNumber,"page-sizes":e.pageSizes,total:e.total,"hide-on-single-page":!0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2)],1)],1),s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.editVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.editVisible=t},closed:e.closedFormDialog}},[s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDialog,expression:"loadingDialog"}],ref:"imeiForm",attrs:{model:e.studentForm,rules:e.rules,"label-width":"120px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"学号：",prop:"studentNo"}},[s("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.studentForm.studentNo,callback:function(t){e.$set(e.studentForm,"studentNo",t)},expression:"studentForm.studentNo"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.studentForm.name,callback:function(t){e.$set(e.studentForm,"name",t)},expression:"studentForm.name"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"年龄：",prop:"age"}},[s("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.studentForm.age,callback:function(t){e.$set(e.studentForm,"age",t)},expression:"studentForm.age"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[s("el-radio-group",{model:{value:e.studentForm.sex,callback:function(t){e.$set(e.studentForm,"sex",t)},expression:"studentForm.sex"}},[s("el-radio",{attrs:{label:1}},[e._v("男")]),s("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"手机：",prop:"phone"}},[s("el-input",{attrs:{placeholder:"请输入手机"},model:{value:e.studentForm.phone,callback:function(t){e.$set(e.studentForm,"phone",t)},expression:"studentForm.phone"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"学校：",prop:"schoolId"}},[s("el-select",{attrs:{placeholder:"请选择学校"},model:{value:e.studentForm.schoolId,callback:function(t){e.$set(e.studentForm,"schoolId",t)},expression:"studentForm.schoolId"}},e._l(e.selectSchool,(function(e){return s("el-option",{key:e.ID,attrs:{label:e.SchoolName,value:e.ID}})})),1)],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"年级：",prop:"grade"}},[s("el-input",{attrs:{placeholder:"请输入年级"},model:{value:e.studentForm.grade,callback:function(t){e.$set(e.studentForm,"grade",t)},expression:"studentForm.grade"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"班级：",prop:"class"}},[s("el-input",{attrs:{placeholder:"请输入班级"},model:{value:e.studentForm.class,callback:function(t){e.$set(e.studentForm,"class",t)},expression:"studentForm.class"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"IMEI号：",prop:"imei"}},[s("el-input",{attrs:{placeholder:"请输入IMEI号"},model:{value:e.studentForm.imei,callback:function(t){e.$set(e.studentForm,"imei",t)},expression:"studentForm.imei"}})],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.cancelSubmit("imeiForm")}}},[e._v("取 消")]),e.isDisabledbtn?e._e():s("el-button",{attrs:{type:"primary",disabled:e.disabledbtn},on:{click:function(t){return e.submitForm("studentForm","post",e.studentUrl,e.studentForm)}}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.delVisible=t}}},[s("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),s("el-button",{class:{disabledbtn:e.isDisabledbtn},attrs:{type:"primary",disabled:e.disabledbtn},on:{click:function(t){return e.deleteRow(e.deviceInfoUrl)}}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"提示",visible:e.loginVisible,width:"300px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.loginVisible=t}}},[s("div",{staticClass:"del-dialog-cnt"},[e._v("登录时间过长，请重新登录")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.loginVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.Common.signOut("/login")}}},[e._v("确 定")])],1)])],1)},o=[],l=(s("159b"),s("7db0"),s("a434"),{name:"studentInfo",data:function(){return{Request:this.$api.api.prototype,Common:this.$common.common.prototype,studentUrl:"",gradeInfoUrl:"",classInfoUrl:"",deviceInfoUrl:"",schoolInfoUrl:"",deviceMoveInfoUrl:"",selectTableData:[],selectGradeCopy:[],selectClassCopy:[],selectSchoolCopy:[],selectSchool:[],selectSchoolTemplate:[],selectSchoolMove:[],selectSchoolMoveOld:[],selectSchoolMoveNew:[],selectDeviceTypeCopy:[],selectDeviceType:[],selectOperatorTypeCopy:[],selectOperatorType:[],activeNames:["1","2"],tableData:[],dialogTitle:"",editVisible:!1,innerVisible:!1,delVisible:!1,loginVisible:!1,delVisibleType:"delete",disabledbtn:!1,disabledbtnExport:!1,isDisabledbtn:!1,importVisible:!1,transferVisible:!1,transferOldVisible:!1,fileList:[],warningInfo:"",headers:{Authorization:localStorage.getItem("token")},loading:!0,loadingDialog:!1,propTypeCodeDisabled:!1,classCodeDisabled:!0,showType:"add",methodType:"post",total:8,pageSizes:[8,20,30,40,50,100],templateForm:{schoolId:""},transferForm:{schoolId:"",schoolName:""},transferOldForm:{srcId:"",srcAccount:"",destId:"",destAccount:"",imei:""},searchCondition:{schoolId:"",gradeId:"",classId:"",studentName:"",imei:"",rfid:"",phone:"",deviceCode:"",operatorType:"",pageNumber:1,pageSize:8},studentForm:{studentNo:"",name:"",sex:"",age:"",phone:"",class:"",grade:"",schoolId:"",imei:""},rules:{operatorType:[{required:!0,message:"请选择运营商",trigger:"blur"}],deviceCode:[{required:!0,message:"请选择设备类型",trigger:"blur"}],schoolId:[{required:!0,message:"请选择学校",trigger:"blur"}],imei:[{required:!0,message:"请输入IMEI号",trigger:"blur"}],rfid:[{required:!0,message:"请输入RFID号",trigger:"blur"}]},headerFilter:[{prop:"name",label:"学生",selected:!0},{prop:"student_no",label:"学号",selected:!0},{prop:"className",label:"班级",formatter:this.formatterClassName,selected:!0},{prop:"school_name",label:"学校",selected:!0},{prop:"imei",label:"IMEI号",selected:!0},{prop:"phone",label:"手机号",selected:!0}],idx:-1,id:-1}},created:function(){this.schoolInfoUrl=this.Request.getSchoolInfoUrl(),this.studentUrl=this.Request.getStudentUrl(),this.gradeInfoUrl=this.Request.getGradeInfoUrl(),this.classInfoUrl=this.Request.getClassInfoUrl(),this.getSchoolInfoDataRequest(),this.getListDataRequest()},computed:{},methods:{handleCurrentChange:function(e){this.searchCondition.pageNumber=e,this.getListDataRequest()},handleSizeChange:function(e){this.searchCondition.pageSize=e,this.getListDataRequest()},formatterClassName:function(e){return e.grade+"年级"+e.class+"班"},getListDataRequest:function(){this.Common.getAxios(this.Request.getStudentInfoUrl(),"",this.getListData)},getSchoolInfoDataRequest:function(){this.Common.getAxios(this.Request.getSchoolInfoUrl(),"",this.getSchoolData)},getDeviceTypeRequest:function(){this.Common.getAxios(this.propListUrl,{propTypeCode:"DEVICE_MODEL"},this.getPropList,["selectDeviceTypeCopy","selectDeviceType"])},getOperatorTypeRequest:function(){this.Common.getAxios(this.propListUrl,{propTypeCode:"OPERATOR_TYPE"},this.getPropList,["selectOperatorTypeCopy","selectOperatorType"])},getListData:function(e){if(200===e.status){var t=e.data;this.loading=!1,this.tableData=t.data,this.total=t.data.length}else 401===e.status?this.loginVisible=!0:(this.$message.error("服务器繁忙，请稍后再试"),this.loading=!1)},getSchoolData:function(e){if(200===e.status){var t=e.data;this.loading=!1,this.selectSchool=t.data}else 401===e.status?this.loginVisible=!0:(this.$message.error("服务器繁忙，请稍后再试"),this.loading=!1)},getPropList:function(e,t){var s=this;if(200===e.status){var i=e.data;if(!this.validToken(i))return;0===i.code&&""!==i.result&&t.forEach((function(e){s[e]=i.result}))}else this.$message.error("服务器繁忙，请稍后再试")},getGradeCopyInfoData:function(e){if(200===e.status){var t=e.data;if(!this.validToken(t))return;0===t.code&&""!==t.result&&(this.searchCondition.gradeId="",this.searchCondition.classId="",this.selectGradeCopy=[],this.selectClassCopy=[],this.selectGradeCopy=t.result)}else this.$message.error("服务器繁忙，请稍后再试")},getClassInfoCopyData:function(e){if(200===e.status){var t=e.data;if(!this.validToken(t))return;0===t.code&&""!==t.result&&(this.searchCondition.classId="",this.selectClassCopy=t.result)}else this.$message.error("服务器繁忙，请稍后再试")},changeSchoolCopy:function(e){this.Common.getAxios(this.gradeInfoUrl,{schoolId:e},this.getGradeCopyInfoData)},changeSchoolTransfer:function(e){var t={};t=this.selectSchoolMove.find((function(t){return t.id===e})),this.transferForm.schoolName=t.schoolName},changeSchoolTransferOld:function(e){var t={};t=this.selectSchoolMoveOld.find((function(t){return t.id===e})),this.transferOldForm.srcAccount=t.schoolName},changeSchoolTransferNew:function(e){var t={};t=this.selectSchoolMoveNew.find((function(t){return t.id===e})),this.transferOldForm.destAccount=t.schoolName},changeGradeCopy:function(e){this.Common.getAxios(this.classInfoUrl,{gradeId:e},this.getClassInfoCopyData)},rowDblclick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handleViewEdit:function(e,t,s,i){"view"===s?(this.dialogTitle=i,this.isDisabledbtn=!0):"edit"===s&&(this.dialogTitle=i,this.methodType="put"),this.studentForm.id=t.id,this.studentForm.deviceCode=t.deviceCode,this.studentForm.operatorType=t.operatorType,this.studentForm.schoolId=t.schoolId,this.studentForm.imei=t.imei,this.studentForm.rfid=t.rfid,this.showType=s,this.propTypeCodeDisabled=!0,this.classCodeDisabled=!0,this.editVisible=!0},handleDelete:function(e,t){this.idx=e,this.id=t.id,this.delVisible=!0,this.delVisibleType="delete"},searchInfo:function(){this.loading=!0,this.searchCondition.pageNumber=1,this.getListDataRequest()},resetSearch:function(){this.searchCondition.id="",this.searchCondition.operatorType="",this.searchCondition.deviceCode="",this.searchCondition.schoolId="",this.searchCondition.gradeId="",this.searchCondition.classId="",this.searchCondition.studentName="",this.searchCondition.imei="",this.searchCondition.rfid="",this.searchCondition.phone="",this.searchInfo()},addData:function(){this.dialogTitle="新增",this.editVisible=!0},batchDelete:function(){var e=this.$refs.multipleTable.store.states.selection;this.selectTableData=e,e.length>0?(this.delVisible=!0,this.delVisibleType="batchDelete"):this.$message.warning("请至少选择一条数据")},closedFormDialog:function(){this.isDisabledbtn=!1,this.propTypeCodeDisabled=!1,this.classCodeDisabled=!0,this.studentForm.id="",this.studentForm.deviceCode="",this.studentForm.operatorType="",this.studentForm.schoolId="",this.studentForm.imei="",this.studentForm.rfid="",this.showType="add",this.methodType="post",this.$refs["imeiForm"].clearValidate()},submitForm:function(e,t,s,i){this.disabledbtn=!0,this.loadingDialog=!0,this.Common.commonAxios(s,t,i,this.submitFormInfo),this.disabledbtn=!1,this.loadingDialog=!1},submitFormInfo:function(e){if(200===e.status){var t=e.data;this.disabledbtn=!1,this.loadingDialog=!1,200===t.code?(this.editVisible=!1,this.$message.success(t.message),this.getListDataRequest()):this.$message.error(t.message)}else 401===e.status?this.loginVisible=!0:(this.disabledbtn=!1,this.loadingDialog=!1,this.$message.error("服务器繁忙，请稍后再试"))},deleteRow:function(e){if("delete"!==this.delVisibleType&&"batchDelete"!==this.delVisibleType)return this.delVisible=!1,void this.$message.error("别偷偷的修改特定的参数哦");var t=[],s=0,i=[];if("delete"===this.delVisibleType)i.push(this.id);else if("batchDelete"===this.delVisibleType){t=this.$refs.multipleTable.store.states.selection,s=t.length;for(var o=0;o<s;o++)i.push(t[o].id)}this.loading=!0,this.disabledbtn=!0,this.Common.deleteAxios(e,{idArray:i},this.deleteInfo,i),this.delVisible=!1},deleteInfo:function(e,t){if(this.disabledbtn=!1,this.loading=!1,200===e.status){var s=e.data;if(!this.validToken(s))return;if(0!==s.code)return void this.$message.error(s.message);for(var i=this.tableData.length-1;i>=0;i--)for(var o=0;o<t.length;o++)if(t[o]===this.tableData[i].id){this.tableData.splice(i,1);break}this.$message.success("成功删除了".concat(t.length,"条数据")),this.selectTableData=[]}else this.$message.error("服务器繁忙，请稍后再试")},validToken:function(e){return 2001!==e.code&&2101!==e.code&&2102!==e.code||(this.loginVisible=!0,!1)},closedImportDialog:function(){this.warningInfo="",this.templateForm.schoolId="",this.fileList=[]},closedTransferDialog:function(){this.transferForm.schoolId="",this.transferForm.schoolName=""},closedTransferOldDialog:function(){this.transferOldForm.srcId="",this.transferOldForm.srcAccount="",this.transferOldForm.destId="",this.transferOldForm.destAccount="",this.transferOldForm.imei=""},cancelImport:function(){this.importVisible=!1},beforeUploadFile:function(e){var t=e.size/1024/1024<5;return t||this.$message.warning("文件不能大于5M"),t},handleFileSuccess:function(e){0!==e.code?(this.fileList=[],this.$message.warning(e.message),this.warningInfo=e.message):(this.$message.success("批量导入成功"),this.getListDataRequest())},handleFileError:function(){this.$message.warning("服务器繁忙，请稍后再试")}}}),a=l,r=(s("f45a"),s("2877")),n=Object(r["a"])(a,i,o,!1,null,"9a55db94",null);t["default"]=n.exports},f45a:function(e,t,s){"use strict";s("5eb7")}}]);
//# sourceMappingURL=chunk-3f6a62dc.22c1a2ef.js.map